import{s as Ce,f as E,a as J,g as I,h as O,d as g,c as j,j as k,i as z,x,M as U,E as Ee,N as Le,o as Ie,J as Ne,q as te,l as oe,m as re,n as fe,O as ne,y as ae,k as K,P as me,Q as $e,U as Oe}from"./scheduler.239bea07.js";import{S as De,i as Pe,g as q,t as V,c as R,a as D,b as A,d as Q,m as F,e as G}from"./index.83fc6ed7.js";import{e as se,T as H,M as ce,C as Ve,S as We,X as ze}from"./2.f404646e.js";import{i as le}from"./settings.0dec3c96.js";import{G as Be}from"./git-branch.b68fb57a.js";import{P as Je}from"./plus.47a585f1.js";function _e(o,e,l){const t=o.slice();return t[15]=e[l],t}function je(o){const e=o.slice(),l=e[6]();return e[18]=l,e}function Me(o){let e,l,t,s=ue(o[18])+"",r,m,a,u;var n=o[7](o[18]);function d(f,p){return{props:{size:16,class:"text-cyan-400"}}}return n&&(e=te(n,d())),a=new Ve({props:{size:14,class:"text-gray-400 ml-auto"}}),{c(){e&&A(e.$$.fragment),l=J(),t=E("span"),r=oe(s),m=J(),A(a.$$.fragment),this.h()},l(f){e&&Q(e.$$.fragment,f),l=j(f),t=I(f,"SPAN",{class:!0});var p=O(t);r=re(p,s),p.forEach(g),m=j(f),Q(a.$$.fragment,f),this.h()},h(){k(t,"class","text-white truncate")},m(f,p){e&&F(e,f,p),z(f,l,p),z(f,t,p),x(t,r),z(f,m,p),F(a,f,p),u=!0},p(f,p){if(n!==(n=f[7](f[18]))){if(e){q();const y=e;V(y.$$.fragment,1,0,()=>{G(y,1)}),R()}n?(e=te(n,d()),A(e.$$.fragment),D(e.$$.fragment,1),F(e,l.parentNode,l)):e=null}},i(f){u||(e&&D(e.$$.fragment,f),D(a.$$.fragment,f),u=!0)},o(f){e&&V(e.$$.fragment,f),V(a.$$.fragment,f),u=!1},d(f){f&&(g(l),g(t),g(m)),e&&G(e,f),G(a,f)}}}function Ue(o){let e,l,t,s="Loading...";return{c(){e=E("div"),l=J(),t=E("span"),t.textContent=s,this.h()},l(r){e=I(r,"DIV",{class:!0}),O(e).forEach(g),l=j(r),t=I(r,"SPAN",{class:!0,"data-svelte-h":!0}),ne(t)!=="svelte-13049mz"&&(t.textContent=s),this.h()},h(){k(e,"class","animate-spin rounded-full h-4 w-4 border-b-2 border-cyan-400"),k(t,"class","text-gray-400")},m(r,m){z(r,e,m),z(r,l,m),z(r,t,m)},p:ae,i:ae,o:ae,d(r){r&&(g(e),g(l),g(t))}}}function ye(o){let e,l,t,s=se(o[2]),r=[];for(let u=0;u<s.length;u+=1)r[u]=ve(_e(o,s,u));const m=u=>V(r[u],1,1,()=>{r[u]=null});let a=o[2].length===0&&Se();return{c(){e=E("div");for(let u=0;u<r.length;u+=1)r[u].c();l=J(),a&&a.c(),this.h()},l(u){e=I(u,"DIV",{class:!0});var n=O(e);for(let d=0;d<r.length;d+=1)r[d].l(n);l=j(n),a&&a.l(n),n.forEach(g),this.h()},h(){k(e,"class","absolute top-full left-0 right-0 mt-1 bg-black/90 backdrop-blur-sm border border-gray-700/50 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto")},m(u,n){z(u,e,n);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(e,null);x(e,l),a&&a.m(e,null),t=!0},p(u,n){if(n&167){s=se(u[2]);let d;for(d=0;d<s.length;d+=1){const f=_e(u,s,d);r[d]?(r[d].p(f,n),D(r[d],1)):(r[d]=ve(f),r[d].c(),D(r[d],1),r[d].m(e,l))}for(q(),d=s.length;d<r.length;d+=1)m(d);R()}u[2].length===0?a||(a=Se(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){if(!t){for(let n=0;n<s.length;n+=1)D(r[n]);t=!0}},o(u){r=r.filter(Boolean);for(let n=0;n<r.length;n+=1)V(r[n]);t=!1},d(u){u&&g(e),Ne(r,u),a&&a.d()}}}function be(o){let e,l="Not available";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-16hj01e"&&(e.textContent=l),this.h()},h(){k(e,"class","text-xs text-red-400")},m(t,s){z(t,e,s)},d(t){t&&g(e)}}}function ge(o){let e;return{c(){e=E("div"),this.h()},l(l){e=I(l,"DIV",{class:!0}),O(e).forEach(g),this.h()},h(){k(e,"class","w-2 h-2 bg-cyan-400 rounded-full")},m(l,t){z(l,e,t)},d(l){l&&g(e)}}}function ve(o){let e,l,t,s,r,m=ue(o[15])+"",a,u,n,d=JSON.stringify(o[15].shell_type)===JSON.stringify(o[1]||o[0]),f,p,y,b,w;var C=o[7](o[15]);function B(i,_){return{props:{size:16,class:"text-cyan-400 flex-shrink-0"}}}C&&(l=te(C,B()));let h=!o[15].is_available&&be(),v=d&&ge();function c(){return o[10](o[15])}return{c(){e=E("button"),l&&A(l.$$.fragment),t=J(),s=E("div"),r=E("div"),a=oe(m),u=J(),h&&h.c(),n=J(),v&&v.c(),this.h()},l(i){e=I(i,"BUTTON",{class:!0});var _=O(e);l&&Q(l.$$.fragment,_),t=j(_),s=I(_,"DIV",{class:!0});var N=O(s);r=I(N,"DIV",{class:!0});var P=O(r);a=re(P,m),P.forEach(g),u=j(N),h&&h.l(N),N.forEach(g),n=j(_),v&&v.l(_),_.forEach(g),this.h()},h(){k(r,"class","text-sm font-medium text-white truncate"),k(s,"class","flex-1 min-w-0"),k(e,"class",f="w-full flex items-center space-x-3 px-3 py-2 hover:bg-cyan-500/10 transition-colors text-left border-b border-gray-800/30 last:border-b-0 "+(o[15].is_available?"":"opacity-50 cursor-not-allowed")),e.disabled=p=!o[15].is_available},m(i,_){z(i,e,_),l&&F(l,e,null),x(e,t),x(e,s),x(s,r),x(r,a),x(s,u),h&&h.m(s,null),x(e,n),v&&v.m(e,null),y=!0,b||(w=U(e,"click",c),b=!0)},p(i,_){if(o=i,_&4&&C!==(C=o[7](o[15]))){if(l){q();const N=l;V(N.$$.fragment,1,0,()=>{G(N,1)}),R()}C?(l=te(C,B()),A(l.$$.fragment),D(l.$$.fragment,1),F(l,e,t)):l=null}(!y||_&4)&&m!==(m=ue(o[15])+"")&&fe(a,m),o[15].is_available?h&&(h.d(1),h=null):h||(h=be(),h.c(),h.m(s,null)),_&7&&(d=JSON.stringify(o[15].shell_type)===JSON.stringify(o[1]||o[0])),d?v||(v=ge(),v.c(),v.m(e,null)):v&&(v.d(1),v=null),(!y||_&4&&f!==(f="w-full flex items-center space-x-3 px-3 py-2 hover:bg-cyan-500/10 transition-colors text-left border-b border-gray-800/30 last:border-b-0 "+(o[15].is_available?"":"opacity-50 cursor-not-allowed")))&&k(e,"class",f),(!y||_&4&&p!==(p=!o[15].is_available))&&(e.disabled=p)},i(i){y||(l&&D(l.$$.fragment,i),y=!0)},o(i){l&&V(l.$$.fragment,i),y=!1},d(i){i&&g(e),l&&G(l),h&&h.d(),v&&v.d(),b=!1,w()}}}function Se(o){let e,l="No shells available";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1xc20tp"&&(e.textContent=l),this.h()},h(){k(e,"class","px-3 py-4 text-center text-gray-400 text-sm")},m(t,s){z(t,e,s)},d(t){t&&g(e)}}}function Ae(o){let e,l,t,s,r,m,a,u;const n=[Ue,Me],d=[];function f(b,w){return b[3]?0:1}function p(b,w){return w===1?je(b):b}t=f(o),s=d[t]=n[t](p(o,t));let y=o[4]&&!o[3]&&ye(o);return{c(){e=E("div"),l=E("button"),s.c(),r=J(),y&&y.c(),this.h()},l(b){e=I(b,"DIV",{class:!0});var w=O(e);l=I(w,"BUTTON",{class:!0});var C=O(l);s.l(C),C.forEach(g),r=j(w),y&&y.l(w),w.forEach(g),this.h()},h(){k(l,"class","flex items-center space-x-2 px-3 py-2 bg-black/20 border border-gray-700/50 rounded-lg hover:border-cyan-500/50 transition-colors text-sm min-w-[160px]"),l.disabled=o[3],k(e,"class","shell-selector relative svelte-1xkpzkl")},m(b,w){z(b,e,w),x(e,l),d[t].m(l,null),x(e,r),y&&y.m(e,null),m=!0,a||(u=[U(window,"click",o[8]),U(l,"click",o[9])],a=!0)},p(b,[w]){let C=t;t=f(b),t===C?d[t].p(p(b,t),w):(q(),V(d[C],1,1,()=>{d[C]=null}),R(),s=d[t],s?s.p(p(b,t),w):(s=d[t]=n[t](p(b,t)),s.c()),D(s,1),s.m(l,null)),(!m||w&8)&&(l.disabled=b[3]),b[4]&&!b[3]?y?(y.p(b,w),w&24&&D(y,1)):(y=ye(b),y.c(),D(y,1),y.m(e,null)):y&&(q(),V(y,1,1,()=>{y=null}),R())},i(b){m||(D(s),D(y),m=!0)},o(b){V(s),V(y),m=!1},d(b){b&&g(e),d[t].d(),y&&y.d(),a=!1,Ee(u)}}}function ue(o){return typeof o.shell_type=="object"&&o.shell_type.WSLDistro?`WSL: ${o.shell_type.WSLDistro}`:o.display_name}function Fe(o,e,l){const t=Le();let{selectedShell:s=null}=e,r=null,m=[],a=null,u=!0,n=!1;const d={Nushell:H,PowerShell:H,PowerShellCore:H,Cmd:We,WSL:ce,WSLDistro:ce,GitBash:Be,Custom:H};Ie(async()=>{await f()});async function f(){try{l(3,u=!0),l(2,m=[{shell_type:"Nushell",display_name:"Nushell (Embedded)",executable_path:"embedded",is_available:!0},{shell_type:"PowerShellCore",display_name:"PowerShell Core",executable_path:"pwsh.exe",is_available:!0}]),a="Nushell",s||l(0,s=a),console.log("ShellSelector: Using PowerShell Core only (hardcoded)")}catch(h){console.error("Failed to load shells:",h)}finally{l(3,u=!1)}}function p(h){console.log("ShellSelector: handleShellSelect called with:",h),console.log("ShellSelector: shell.shell_type:",h.shell_type),console.log("ShellSelector: shell.display_name:",h.display_name),l(0,s=h.shell_type),l(4,n=!1);const v={shellType:h.shell_type,displayName:h.display_name};console.log("ShellSelector: dispatching event with data:",v),t("shell-selected",v)}function y(){const h=r||s;if(console.log("getSelectedShellInfo: Looking for shell:",h),console.log("getSelectedShellInfo: Available shells:",m),!h)return console.log("getSelectedShellInfo: No shell selected, using default"),{display_name:"PowerShell Core",shell_type:"PowerShellCore"};let v=null;return typeof h=="string"&&(v=m.find(c=>typeof c.shell_type=="string"?c.shell_type===h:!1)),v||(v=m.find(c=>JSON.stringify(c.shell_type)===JSON.stringify(h))),!v&&typeof h=="string"&&h.startsWith("WSL")&&(v=m.find(c=>c.display_name&&c.display_name.includes("WSL"))),console.log("getSelectedShellInfo: Found shell:",v),v||{display_name:typeof h=="string"?h:"Unknown Shell",shell_type:h}}function b(h){if(typeof h.shell_type=="string")return d[h.shell_type]||H;if(h.shell_type&&typeof h.shell_type=="object"){if(h.shell_type.WSLDistro)return ce;const v=Object.keys(h.shell_type)[0];return d[v]||H}return H}function w(h){h.target.closest(".shell-selector")||l(4,n=!1)}const C=()=>l(4,n=!n),B=h=>p(h);return o.$$set=h=>{"selectedShell"in h&&l(0,s=h.selectedShell)},o.$$.update=()=>{o.$$.dirty&1&&s&&l(0,s),o.$$.dirty&3&&s!==r&&l(1,r=s)},[s,r,m,u,n,p,y,b,w,C,B]}class Ge extends De{constructor(e){super(),Pe(this,e,Fe,Ae,Ce,{selectedShell:0})}}function we(o,e,l){const t=o.slice();return t[17]=e[l],t}function ke(o){let e,l,t,s,r;l=new ze({props:{size:12}});function m(){return o[10](o[17])}return{c(){e=E("button"),A(l.$$.fragment),this.h()},l(a){e=I(a,"BUTTON",{class:!0});var u=O(e);Q(l.$$.fragment,u),u.forEach(g),this.h()},h(){k(e,"class","ml-2 text-gray-400 hover:text-pink-400 transition-colors")},m(a,u){z(a,e,u),F(l,e,null),t=!0,s||(r=U(e,"click",Oe(m)),s=!0)},p(a,u){o=a},i(a){t||(D(l.$$.fragment,a),t=!0)},o(a){V(l.$$.fragment,a),t=!1},d(a){a&&g(e),G(l),s=!1,r()}}}function Te(o){let e,l=o[17].title+"",t,s,r,m,a,u,n=o[0].length>1&&ke(o);function d(){return o[11](o[17])}return{c(){e=E("button"),t=oe(l),s=J(),n&&n.c(),this.h()},l(f){e=I(f,"BUTTON",{class:!0});var p=O(e);t=re(p,l),s=j(p),n&&n.l(p),p.forEach(g),this.h()},h(){k(e,"class",r="tab px-3 py-2 rounded-t-lg text-sm transition-all duration-200 relative "+(o[17].active?"bg-black/95 text-cyan-300 border-t-2 border-l-2 border-r-2 border-cyan-400 shadow-lg shadow-cyan-500/20 -mb-px":"bg-gray-800/60 text-gray-300 hover:bg-cyan-500/10 hover:text-cyan-400 border border-gray-600/50")+" svelte-veueib")},m(f,p){z(f,e,p),x(e,t),x(e,s),n&&n.m(e,null),m=!0,a||(u=U(e,"click",d),a=!0)},p(f,p){o=f,(!m||p&1)&&l!==(l=o[17].title+"")&&fe(t,l),o[0].length>1?n?(n.p(o,p),p&1&&D(n,1)):(n=ke(o),n.c(),D(n,1),n.m(e,null)):n&&(q(),V(n,1,1,()=>{n=null}),R()),(!m||p&1&&r!==(r="tab px-3 py-2 rounded-t-lg text-sm transition-all duration-200 relative "+(o[17].active?"bg-black/95 text-cyan-300 border-t-2 border-l-2 border-r-2 border-cyan-400 shadow-lg shadow-cyan-500/20 -mb-px":"bg-gray-800/60 text-gray-300 hover:bg-cyan-500/10 hover:text-cyan-400 border border-gray-600/50")+" svelte-veueib"))&&k(e,"class",r)},i(f){m||(D(n),m=!0)},o(f){V(n),m=!1},d(f){f&&g(e),n&&n.d(),a=!1,u()}}}function xe(o){let e=(o[3].output||`◉ GHOSTSHELL TERMINAL v2.0 ◉
> System ready. Enter commands below.
> Type "help" for available commands.

`)+"",l;return{c(){l=oe(e)},l(t){l=re(t,e)},m(t,s){z(t,l,s)},p(t,s){s&8&&e!==(e=(t[3].output||`◉ GHOSTSHELL TERMINAL v2.0 ◉
> System ready. Enter commands below.
> Type "help" for available commands.

`)+"")&&fe(l,e)},d(t){t&&g(l)}}}function He(o){let e,l,t,s,r,m,a,u,n,d,f,p,y,b,w,C,B,h="❯",v,c,i,_,N,P=se(o[0]),T=[];for(let S=0;S<P.length;S+=1)T[S]=Te(we(o,P,S));const X=S=>V(T[S],1,1,()=>{T[S]=null});m=new Je({props:{size:14}}),n=new Ge({props:{selectedShell:o[2]}}),n.$on("shell-selected",o[5]);let W=o[3]&&xe(o);return{c(){e=E("div"),l=E("div"),t=E("div");for(let S=0;S<T.length;S+=1)T[S].c();s=J(),r=E("button"),A(m.$$.fragment),a=J(),u=E("div"),A(n.$$.fragment),d=J(),f=E("div"),p=E("div"),W&&W.c(),b=J(),w=E("div"),C=E("div"),B=E("span"),B.textContent=h,v=J(),c=E("input"),this.h()},l(S){e=I(S,"DIV",{class:!0});var L=O(e);l=I(L,"DIV",{class:!0});var M=O(l);t=I(M,"DIV",{class:!0});var $=O(t);for(let ie=0;ie<T.length;ie+=1)T[ie].l($);s=j($),r=I($,"BUTTON",{class:!0});var Y=O(r);Q(m.$$.fragment,Y),Y.forEach(g),$.forEach(g),a=j(M),u=I(M,"DIV",{class:!0});var he=O(u);Q(n.$$.fragment,he),he.forEach(g),M.forEach(g),d=j(L),f=I(L,"DIV",{class:!0});var Z=O(f);p=I(Z,"DIV",{id:!0,class:!0,style:!0});var de=O(p);W&&W.l(de),de.forEach(g),b=j(Z),w=I(Z,"DIV",{class:!0});var pe=O(w);C=I(pe,"DIV",{class:!0});var ee=O(C);B=I(ee,"SPAN",{class:!0,"data-svelte-h":!0}),ne(B)!=="svelte-1ldj7xk"&&(B.textContent=h),v=j(ee),c=I(ee,"INPUT",{type:!0,placeholder:!0,class:!0,style:!0}),ee.forEach(g),pe.forEach(g),Z.forEach(g),L.forEach(g),this.h()},h(){k(r,"class","add-tab px-2 py-2 rounded-lg bg-gray-800/60 hover:bg-cyan-500/20 text-gray-300 hover:text-cyan-400 transition-all duration-200 border border-gray-600/50"),k(t,"class","flex space-x-1 flex-1"),k(u,"class","ml-4"),k(l,"class","tab-bar flex items-center bg-gray-900/90 border-b border-cyan-500/30 px-4 py-1 backdrop-blur-sm relative z-10 svelte-veueib"),k(p,"id",y="output-"+o[1]),k(p,"class","output-area flex-1 p-4 bg-black/95 text-cyan-300 font-mono text-sm overflow-y-auto whitespace-pre-wrap border-l-2 border-r-2 border-cyan-400/50 shadow-inner shadow-cyan-500/10 min-h-0 svelte-veueib"),K(p,"font-family","'JetBrains Mono', monospace"),K(p,"line-height","1.5"),K(p,"text-shadow","0 0 2px rgba(34, 211, 238, 0.3)"),K(p,"max-height","calc(100vh - 200px)"),k(B,"class","text-pink-400 font-mono mr-2 font-bold animate-pulse"),k(c,"type","text"),k(c,"placeholder","Enter command..."),k(c,"class","flex-1 bg-transparent text-cyan-300 font-mono outline-none placeholder-gray-500"),K(c,"font-family","'JetBrains Mono', monospace"),K(c,"text-shadow","0 0 2px rgba(34, 211, 238, 0.3)"),k(C,"class","flex items-center"),k(w,"class","input-area flex-shrink-0 bg-gray-900/95 border-t border-l-2 border-r-2 border-b-2 border-cyan-500/30 border-l-cyan-400/50 border-r-cyan-400/50 border-b-cyan-400/50 p-4 backdrop-blur-sm svelte-veueib"),k(f,"class","terminal-output flex-1 flex flex-col relative min-h-0 svelte-veueib"),k(e,"class","terminal-container h-full flex flex-col bg-gray-900/95 backdrop-blur-sm relative svelte-veueib")},m(S,L){z(S,e,L),x(e,l),x(l,t);for(let M=0;M<T.length;M+=1)T[M]&&T[M].m(t,null);x(t,s),x(t,r),F(m,r,null),x(l,a),x(l,u),F(n,u,null),x(e,d),x(e,f),x(f,p),W&&W.m(p,null),x(f,b),x(f,w),x(w,C),x(C,B),x(C,v),x(C,c),me(c,o[4]),i=!0,_||(N=[U(r,"click",o[6]),U(c,"input",o[12]),U(c,"keydown",o[9])],_=!0)},p(S,[L]){if(L&385){P=se(S[0]);let $;for($=0;$<P.length;$+=1){const Y=we(S,P,$);T[$]?(T[$].p(Y,L),D(T[$],1)):(T[$]=Te(Y),T[$].c(),D(T[$],1),T[$].m(t,s))}for(q(),$=P.length;$<T.length;$+=1)X($);R()}const M={};L&4&&(M.selectedShell=S[2]),n.$set(M),S[3]?W?W.p(S,L):(W=xe(S),W.c(),W.m(p,null)):W&&(W.d(1),W=null),(!i||L&2&&y!==(y="output-"+S[1]))&&k(p,"id",y),L&16&&c.value!==S[4]&&me(c,S[4])},i(S){if(!i){for(let L=0;L<P.length;L+=1)D(T[L]);D(m.$$.fragment,S),D(n.$$.fragment,S),i=!0}},o(S){T=T.filter(Boolean);for(let L=0;L<T.length;L+=1)V(T[L]);V(m.$$.fragment,S),V(n.$$.fragment,S),i=!1},d(S){S&&g(e),Ne(T,S),G(m),G(n),W&&W.d(),_=!1,Ee(N)}}}function qe(o,e,l){let t,s=[{id:1,title:"Shell 1",active:!0,sessionId:null,shellType:"Nushell",output:""}],r=1,m=2,a="",u="Nushell";Ie(async()=>{console.log("Terminal mounted, initializing..."),await n()}),$e(()=>{console.log("Terminal component destroyed")});async function n(){const c=s.find(_=>_.id===r);if(!c)return;console.log(`Initializing tab ${c.id} with shell ${c.shellType}`);let i="";c.shellType==="Nushell"?i=`◉ Nushell ready. Enter commands below.

`:i=`◉ ${c.shellType?.replace("PowerShellCore","PowerShell Core")||"PowerShell Core"} ready. Enter commands below.

`,l(0,s=s.map(_=>_.id===c.id?{..._,output:i}:_)),console.log(`Tab ${c.id} initialized successfully`)}async function d(){if(!a.trim()||!t)return;const c=a.trim();console.log(`Executing command with ${t.shellType}: ${c}`),l(4,a=""),l(3,t.output+=`❯ ${c}
`,t),l(0,s=[...s]),w();try{let i;if(t.shellType==="Nushell")t.sessionId||(l(3,t.sessionId=await le("nushell_create_session"),t),console.log(`Created Nushell session: ${t.sessionId}`)),i=await le("nushell_execute_command",{sessionId:t.sessionId,command:c});else{let _=t.shellType||"PowerShell Core";_==="PowerShell Core"&&(_="PowerShellCore"),i=await le("simple_execute_command",{shellType:_,command:c})}i.output?l(3,t.output+=i.output,t):i.stdout&&l(3,t.output+=i.stdout,t),i.error?l(3,t.output+=`Error: ${i.error}
`,t):i.stderr&&l(3,t.output+=`Error: ${i.stderr}`,t),!i.success&&i.exit_code!==0&&l(3,t.output+=`Command exited with code: ${i.exit_code}
`,t),l(0,s=[...s]),w()}catch(i){console.error("Error executing command:",i),l(3,t.output+=`Error: ${i}
`,t),l(0,s=[...s]),w()}}async function f(c){const{shellType:i,displayName:_}=c.detail;if(console.log("Shell selected:",i,_),console.log("Shell type type:",typeof i),console.log("Shell type JSON:",JSON.stringify(i)),!t)return;let N="";if(typeof i=="string")N=i;else if(typeof i=="object"&&i!==null)if(i.WSLDistro)N=`WSL:${i.WSLDistro}`;else if(i.WSL)N="WSL";else{const P=Object.keys(i);if(P.length>0){const T=P[0],X=i[T];typeof X=="string"&&X.length>0?N=`${T}:${X}`:N=T}else console.error("Empty shell type object:",i),N="PowerShellCore"}else i==null?(console.error("Null/undefined shell type"),N="PowerShellCore"):(console.error("Invalid shell type:",i,typeof i),N="PowerShellCore");console.log("Converted shell type string:",N),N==="PowerShell Core"&&(N="PowerShellCore"),l(3,t.sessionId=null,t),l(0,s=s.map(P=>P.id===r?{...P,shellType:N,sessionId:null,output:`${P.output}◉ Switching to ${_}...
`}:P)),l(2,u=N),l(0,s=[...s]);try{await n(),t&&(l(3,t.output+=`✓ Successfully switched to ${_}

`,t),l(0,s=[...s]))}catch(P){console.error("Failed to switch shell:",P),t&&(l(3,t.output+=`✗ Failed to switch to ${_}: ${P}

`,t),l(0,s=[...s]))}}function p(){const c={id:m++,title:`Shell ${m-1}`,active:!1,sessionId:null,shellType:"PowerShellCore",output:""};l(0,s=[...s,c]),b(c.id)}async function y(c){if(s.length===1)return;const i=s.find(_=>_.id===c);if(i&&i.shellType==="Nushell"&&i.sessionId)try{await le("nushell_close_session",{sessionId:i.sessionId}),console.log(`Closed Nushell session: ${i.sessionId}`)}catch(_){console.error("Error closing Nushell session:",_)}l(0,s=s.filter(_=>_.id!==c)),r===c&&l(1,r=s[0].id)}function b(c){l(0,s=s.map(_=>({..._,active:_.id===c}))),l(1,r=c);const i=s.find(_=>_.id===c);i&&!i.sessionId&&n()}function w(){setTimeout(()=>{const c=document.getElementById(`output-${r}`);c&&(c.scrollTop=c.scrollHeight)},10)}function C(c){c.key==="Enter"&&(c.preventDefault(),d())}const B=c=>y(c.id),h=c=>b(c.id);function v(){a=this.value,l(4,a)}return o.$$.update=()=>{o.$$.dirty&3&&l(3,t=s.find(c=>c.id===r)),o.$$.dirty&12&&(l(2,u=t?.shellType||"Nushell"),console.log("TerminalSimple: currentShellType updated to:",u),console.log("TerminalSimple: activeTab.shellType:",t?.shellType))},[s,r,u,t,a,f,p,y,b,C,B,h,v]}class el extends De{constructor(e){super(),Pe(this,e,qe,He,Ce,{})}}export{el as default};
