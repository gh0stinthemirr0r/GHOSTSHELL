import{w as y}from"./index.57752d85.js";function p(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function i(r,t=!1){const n=p(),o=`_${n}`;return Object.defineProperty(window,o,{value:e=>(t&&Reflect.deleteProperty(window,o),r?.(e)),writable:!1,configurable:!0}),n}async function a(r,t={}){return new Promise((n,o)=>{const e=i(s=>{n(s),Reflect.deleteProperty(window,`_${c}`)},!0),c=i(s=>{o(s),Reflect.deleteProperty(window,`_${e}`)},!0);window.__TAURI_IPC__({cmd:r,callback:e,error:c,...t})})}function m(r,t="asset"){return window.__TAURI__.convertFileSrc(r,t)}const P=Object.freeze(Object.defineProperty({__proto__:null,convertFileSrc:m,invoke:a,transformCallback:i},Symbol.toStringTag,{value:"Module"})),h={themes:[],currentTheme:null,currentThemeId:null};function d(){const{subscribe:r,set:t,update:n}=y(h);return{subscribe:r,setThemes:o=>{n(e=>({...e,themes:o}))},setCurrentTheme:o=>{n(e=>({...e,currentTheme:o})),l(o.tokens)},setCurrentThemeId:o=>{n(e=>({...e,currentThemeId:o}))},applyTheme:async o=>{try{const e=await a("apply_theme",{themeId:o});return n(c=>({...c,currentTheme:e,currentThemeId:o})),l(e.tokens),e}catch(e){throw console.error("Failed to apply theme:",e),e}},saveTheme:async o=>{try{const e=await a("save_theme",{theme:o}),c=await a("list_themes");return n(s=>({...s,themes:c})),e}catch(e){throw console.error("Failed to save theme:",e),e}},exportTheme:async o=>{try{return await a("export_theme",{themeId:o})}catch(e){throw console.error("Failed to export theme:",e),e}},importTheme:async o=>{try{const e=await a("import_theme",{theme:o}),c=await a("list_themes");return n(s=>({...s,themes:c})),e}catch(e){throw console.error("Failed to import theme:",e),e}}}}function l(r){const t=document.documentElement;t.style.setProperty("--bg-tint",r.bgTint),t.style.setProperty("--fg",r.fg),t.style.setProperty("--slate",r.slate),t.style.setProperty("--accent-pink",r.accentPink),t.style.setProperty("--accent-cyan",r.accentCyan),t.style.setProperty("--accent-neon-green",r.accentNeonGreen),t.style.setProperty("--glow-strength",r.glowStrength.toString()),t.style.setProperty("--blur",`${r.blurPx}px`),t.style.setProperty("--noise",r.noiseOpacity.toString()),t.style.setProperty("--cursor-color",r.cursorColor),t.style.setProperty("--font-mono",r.monoFont),t.style.setProperty("--font-ui",r.uiFont),t.style.setProperty("--radius",`${r.radius}px`),t.style.setProperty("--border-color",r.border),w(r.bgTint)}async function w(r){const t=f(r);if(t){const[n,o,e,c]=t,s=Math.round(c*255);try{await a("set_acrylic_tint",{r:n,g:o,b:e,a:s})}catch(u){console.warn("Failed to update acrylic tint:",u)}}}function f(r){const t=r.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(t){const n=parseInt(t[1],10),o=parseInt(t[2],10),e=parseInt(t[3],10),c=t[4]?parseFloat(t[4]):1;return[n,o,e,c]}return null}const T=d();export{i as a,P as b,a as i,T as t};
