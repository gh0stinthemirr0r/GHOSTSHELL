import{o as we,t as ye}from"../chunks/scheduler.a8b88eab.js";import{S as ze,a as We,I as V,g as De,f as Fe,b as _e,c as fe,s as ne,i as ve,d as G,e as H,o as Me,P as Ve,h as tt}from"../chunks/singletons.430667a7.js";function nt(t,r){return t==="/"||r==="ignore"?t:r==="never"?t.endsWith("/")?t.slice(0,-1):t:r==="always"&&!t.endsWith("/")?t+"/":t}function at(t){return t.split("%25").map(decodeURI).join("%25")}function rt(t){for(const r in t)t[r]=decodeURIComponent(t[r]);return t}const ot=["href","pathname","search","searchParams","toString","toJSON"];function it(t,r){const l=new URL(t);for(const o of ot)Object.defineProperty(l,o,{get(){return r(),t[o]},enumerable:!0,configurable:!0});return st(l),l}function st(t){Object.defineProperty(t,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const ct="/__data.json";function lt(t){return t.replace(/\/$/,"")+ct}function ft(...t){let r=5381;for(const l of t)if(typeof l=="string"){let o=l.length;for(;o;)r=r*33^l.charCodeAt(--o)}else if(ArrayBuffer.isView(l)){const o=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);let g=o.length;for(;g;)r=r*33^o[--g]}else throw new TypeError("value must be a string or TypedArray");return(r>>>0).toString(36)}const Ye=window.fetch;window.fetch=(t,r)=>((t instanceof Request?t.method:(r==null?void 0:r.method)||"GET")!=="GET"&&re.delete(ke(t)),Ye(t,r));const re=new Map;function ut(t){const r=atob(t),l=new Uint8Array(r.length);for(let o=0;o<r.length;o++)l[o]=r.charCodeAt(o);return l.buffer}function dt(t,r){const l=ke(t,r),o=document.querySelector(l);if(o!=null&&o.textContent){let{body:g,...u}=JSON.parse(o.textContent);const E=o.getAttribute("data-ttl");return E&&re.set(l,{body:g,init:u,ttl:1e3*Number(E)}),o.getAttribute("data-b64")!==null&&(g=ut(g)),Promise.resolve(new Response(g,u))}return window.fetch(t,r)}function ht(t,r,l){if(re.size>0){const o=ke(t,l),g=re.get(o);if(g){if(performance.now()<g.ttl&&["default","force-cache","only-if-cached",void 0].includes(l==null?void 0:l.cache))return new Response(g.body,g.init);re.delete(o)}}return window.fetch(r,l)}function ke(t,r){let o=`script[data-sveltekit-fetched][data-url=${JSON.stringify(t instanceof Request?t.url:t)}]`;if(r!=null&&r.headers||r!=null&&r.body){const g=[];r.headers&&g.push([...new Headers(r.headers)].join(",")),r.body&&(typeof r.body=="string"||ArrayBuffer.isView(r.body))&&g.push(r.body),o+=`[data-hash="${ft(...g)}"]`}return o}const pt=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function gt(t){const r=[];return{pattern:t==="/"?/^\/$/:new RegExp(`^${wt(t).map(o=>{const g=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(o);if(g)return r.push({name:g[1],matcher:g[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const u=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(o);if(u)return r.push({name:u[1],matcher:u[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!o)return;const E=o.split(/\[(.+?)\](?!\])/);return"/"+E.map((m,w)=>{if(w%2){if(m.startsWith("x+"))return be(String.fromCharCode(parseInt(m.slice(2),16)));if(m.startsWith("u+"))return be(String.fromCharCode(...m.slice(2).split("-").map(j=>parseInt(j,16))));const h=pt.exec(m);if(!h)throw new Error(`Invalid param: ${m}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,N,x,R,T]=h;return r.push({name:R,matcher:T,optional:!!N,rest:!!x,chained:x?w===1&&E[0]==="":!1}),x?"(.*?)":N?"([^/]*)?":"([^/]+?)"}return be(m)}).join("")}).join("")}/?$`),params:r}}function mt(t){return!/^\([^)]+\)$/.test(t)}function wt(t){return t.slice(1).split("/").filter(mt)}function yt(t,r,l){const o={},g=t.slice(1),u=g.filter(f=>f!==void 0);let E=0;for(let f=0;f<r.length;f+=1){const m=r[f];let w=g[f-E];if(m.chained&&m.rest&&E&&(w=g.slice(f-E,f+1).filter(h=>h).join("/"),E=0),w===void 0){m.rest&&(o[m.name]="");continue}if(!m.matcher||l[m.matcher](w)){o[m.name]=w;const h=r[f+1],N=g[f+1];h&&!h.rest&&h.optional&&N&&m.chained&&(E=0),!h&&!N&&Object.keys(o).length===u.length&&(E=0);continue}if(m.optional&&m.chained){E++;continue}return}if(!E)return o}function be(t){return t.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function _t({nodes:t,server_loads:r,dictionary:l,matchers:o}){const g=new Set(r);return Object.entries(l).map(([f,[m,w,h]])=>{const{pattern:N,params:x}=gt(f),R={id:f,exec:T=>{const j=N.exec(T);if(j)return yt(j,x,o)},errors:[1,...h||[]].map(T=>t[T]),layouts:[0,...w||[]].map(E),leaf:u(m)};return R.errors.length=R.layouts.length=Math.max(R.errors.length,R.layouts.length),R});function u(f){const m=f<0;return m&&(f=~f),[m,t[f]]}function E(f){return f===void 0?f:[g.has(f),t[f]]}}function Xe(t){try{return JSON.parse(sessionStorage[t])}catch{}}function qe(t,r){const l=JSON.stringify(r);try{sessionStorage[t]=l}catch{}}const vt=-1,bt=-2,Et=-3,St=-4,kt=-5,Rt=-6;function At(t,r){if(typeof t=="number")return g(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const l=t,o=Array(l.length);function g(u,E=!1){if(u===vt)return;if(u===Et)return NaN;if(u===St)return 1/0;if(u===kt)return-1/0;if(u===Rt)return-0;if(E)throw new Error("Invalid input");if(u in o)return o[u];const f=l[u];if(!f||typeof f!="object")o[u]=f;else if(Array.isArray(f))if(typeof f[0]=="string"){const m=f[0],w=r==null?void 0:r[m];if(w)return o[u]=w(g(f[1]));switch(m){case"Date":o[u]=new Date(f[1]);break;case"Set":const h=new Set;o[u]=h;for(let R=1;R<f.length;R+=1)h.add(g(f[R]));break;case"Map":const N=new Map;o[u]=N;for(let R=1;R<f.length;R+=2)N.set(g(f[R]),g(f[R+1]));break;case"RegExp":o[u]=new RegExp(f[1],f[2]);break;case"Object":o[u]=Object(f[1]);break;case"BigInt":o[u]=BigInt(f[1]);break;case"null":const x=Object.create(null);o[u]=x;for(let R=1;R<f.length;R+=2)x[f[R]]=g(f[R+1]);break;default:throw new Error(`Unknown type ${m}`)}}else{const m=new Array(f.length);o[u]=m;for(let w=0;w<f.length;w+=1){const h=f[w];h!==bt&&(m[w]=g(h))}}else{const m={};o[u]=m;for(const w in f){const h=f[w];m[w]=g(h)}}return o[u]}return g(0)}function It(t){return t.filter(r=>r!=null)}const Ze=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...Ze];const Lt=new Set([...Ze]);[...Lt];async function Pt(t,r){var l;for(const o in t)if(typeof((l=t[o])==null?void 0:l.then)=="function")return Object.fromEntries(await Promise.all(Object.entries(t).map(async([g,u])=>[g,await u])));return t}class ae{constructor(r,l){this.status=r,typeof l=="string"?this.body={message:l}:l?this.body=l:this.body={message:`Error: ${r}`}}toString(){return JSON.stringify(this.body)}}class He{constructor(r,l){this.status=r,this.location=l}}class Ot extends Error{constructor(r){super(),this.status=404,this.message=`Not found: ${r}`}}const xt="x-sveltekit-invalidated",Ut="x-sveltekit-trailing-slash";var Je;const K=(Je=Xe(ze))!=null?Je:{};var Ke;const te=(Ke=Xe(We))!=null?Ke:{};function Ee(t){K[t]=ne()}function z(t){return location.href=t.href,new Promise(()=>{})}function Nt(t,r){var $e;const l=_t(t),o=t.nodes[0],g=t.nodes[1];o(),g();const u=document.documentElement,E=[],f=[];let m=null;const w={before_navigate:[],on_navigate:[],after_navigate:[]};let h={branch:[],error:null,url:null},N=!1,x=!1,R=!0,T=!1,j=!1,D=!1,W=!1,q,U=($e=history.state)==null?void 0:$e[V];U||(U=Date.now(),history.replaceState({...history.state,[V]:U},"",location.href));const ue=K[U];ue&&(history.scrollRestoration="manual",scrollTo(ue.x,ue.y));let B,Y,X;async function Re(){if(X=X||Promise.resolve(),await X,!X)return;X=null;const e=new URL(location.href),s=Q(e,!0);m=null;const n=Y={},i=s&&await pe(s);if(n===Y&&i){if(i.type==="redirect")return oe(new URL(i.location,e).href,{},1,n);i.props.page!==void 0&&(B=i.props.page),q.$set(i.props)}}function Ae(e){f.some(s=>s==null?void 0:s.snapshot)&&(te[e]=f.map(s=>{var n;return(n=s==null?void 0:s.snapshot)==null?void 0:n.capture()}))}function Ie(e){var s;(s=te[e])==null||s.forEach((n,i)=>{var a,c;(c=(a=f[i])==null?void 0:a.snapshot)==null||c.restore(n)})}function Le(){Ee(U),qe(ze,K),Ae(U),qe(We,te)}async function oe(e,{noScroll:s=!1,replaceState:n=!1,keepFocus:i=!1,state:a={},invalidateAll:c=!1},d,y){return typeof e=="string"&&(e=new URL(e,De(document))),le({url:e,scroll:s?ne():null,keepfocus:i,redirect_count:d,details:{state:a,replaceState:n},nav_token:y,accepted:()=>{c&&(W=!0)},blocked:()=>{},type:"goto"})}async function Pe(e){return m={id:e.id,promise:pe(e).then(s=>(s.type==="loaded"&&s.state.error&&(m=null),s))},m.promise}async function ie(...e){const n=l.filter(i=>e.some(a=>i.exec(a))).map(i=>Promise.all([...i.layouts,i.leaf].map(a=>a==null?void 0:a[1]())));await Promise.all(n)}function Oe(e){var i,a;h=e.state;const s=document.querySelector("style[data-sveltekit]");s&&s.remove(),B=e.props.page,q=new t.root({target:r,props:{...e.props,stores:G,components:f},hydrate:!0}),Ie(U);const n={from:null,to:{params:h.params,route:{id:(a=(i=h.route)==null?void 0:i.id)!=null?a:null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};w.after_navigate.forEach(c=>c(n)),x=!0}async function Z({url:e,params:s,branch:n,status:i,error:a,route:c,form:d}){var v;let y="never";for(const S of n)(S==null?void 0:S.slash)!==void 0&&(y=S.slash);e.pathname=nt(e.pathname,y),e.search=e.search;const _={type:"loaded",state:{url:e,params:s,branch:n,error:a,route:c},props:{constructors:It(n).map(S=>S.node.component)}};d!==void 0&&(_.props.form=d);let b={},I=!B,A=0;for(let S=0;S<Math.max(n.length,h.branch.length);S+=1){const F=n[S],C=h.branch[S];(F==null?void 0:F.data)!==(C==null?void 0:C.data)&&(I=!0),F&&(b={...b,...F.data},I&&(_.props[`data_${A}`]=b),A+=1)}return(!h.url||e.href!==h.url.href||h.error!==a||d!==void 0&&d!==B.form||I)&&(_.props.page={error:a,params:s,route:{id:(v=c==null?void 0:c.id)!=null?v:null},status:i,url:new URL(e),form:d!=null?d:null,data:I?b:B.data}),_}async function de({loader:e,parent:s,url:n,params:i,route:a,server_data_node:c}){var b,I,A,O,v,S,F;let d=null;const y={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},_=await e();if((b=_.universal)!=null&&b.load){let C=function(...L){for(const p of L){const{href:k}=new URL(p,n);y.dependencies.add(k)}};const M={route:new Proxy(a,{get:(L,p)=>(y.route=!0,L[p])}),params:new Proxy(i,{get:(L,p)=>(y.params.add(p),L[p])}),data:(I=c==null?void 0:c.data)!=null?I:null,url:it(n,()=>{y.url=!0}),async fetch(L,p){let k;L instanceof Request?(k=L.url,p={body:L.method==="GET"||L.method==="HEAD"?void 0:await L.blob(),cache:L.cache,credentials:L.credentials,headers:L.headers,integrity:L.integrity,keepalive:L.keepalive,method:L.method,mode:L.mode,redirect:L.redirect,referrer:L.referrer,referrerPolicy:L.referrerPolicy,signal:L.signal,...p}):k=L;const P=new URL(k,n);return C(P.href),P.origin===n.origin&&(k=P.href.slice(n.origin.length)),x?ht(k,P.href,p):dt(k,p)},setHeaders:()=>{},depends:C,parent(){return y.parent=!0,s()}};d=(A=await _.universal.load.call(null,M))!=null?A:null,d=d?await Pt(d,a.id):null}return{node:_,loader:e,server:c,universal:(O=_.universal)!=null&&O.load?{type:"data",data:d,uses:y}:null,data:(v=d!=null?d:c==null?void 0:c.data)!=null?v:null,slash:n.pathname===H||n.pathname===H+"/"?"always":(F=(S=_.universal)==null?void 0:S.trailingSlash)!=null?F:c==null?void 0:c.slash}}function xe(e,s,n,i,a){if(W)return!0;if(!i)return!1;if(i.parent&&e||i.route&&s||i.url&&n)return!0;for(const c of i.params)if(a[c]!==h.params[c])return!0;for(const c of i.dependencies)if(E.some(d=>d(new URL(c))))return!0;return!1}function he(e,s){return(e==null?void 0:e.type)==="data"?e:(e==null?void 0:e.type)==="skip"&&s!=null?s:null}async function pe({id:e,invalidating:s,url:n,params:i,route:a}){var L;if((m==null?void 0:m.id)===e)return m.promise;const{errors:c,layouts:d,leaf:y}=a,_=[...d,y];c.forEach(p=>p==null?void 0:p().catch(()=>{})),_.forEach(p=>p==null?void 0:p[1]().catch(()=>{}));let b=null;const I=h.url?e!==h.url.pathname+h.url.search:!1,A=h.route?a.id!==h.route.id:!1;let O=!1;const v=_.map((p,k)=>{var J;const P=h.branch[k],$=!!(p!=null&&p[0])&&((P==null?void 0:P.loader)!==p[1]||xe(O,A,I,(J=P.server)==null?void 0:J.uses,i));return $&&(O=!0),$});if(v.some(Boolean)){try{b=await Be(n,v)}catch(p){return se({status:p instanceof ae?p.status:500,error:await ee(p,{url:n,params:i,route:{id:a.id}}),url:n,route:a})}if(b.type==="redirect")return b}const S=b==null?void 0:b.nodes;let F=!1;const C=_.map(async(p,k)=>{var ge;if(!p)return;const P=h.branch[k],$=S==null?void 0:S[k];if((!$||$.type==="skip")&&p[1]===(P==null?void 0:P.loader)&&!xe(F,A,I,(ge=P.universal)==null?void 0:ge.uses,i))return P;if(F=!0,($==null?void 0:$.type)==="error")throw $;return de({loader:p[1],url:n,params:i,route:a,parent:async()=>{var Ce;const Te={};for(let me=0;me<k;me+=1)Object.assign(Te,(Ce=await C[me])==null?void 0:Ce.data);return Te},server_data_node:he($===void 0&&p[0]?{type:"skip"}:$!=null?$:null,p[0]?P==null?void 0:P.server:void 0)})});for(const p of C)p.catch(()=>{});const M=[];for(let p=0;p<_.length;p+=1)if(_[p])try{M.push(await C[p])}catch(k){if(k instanceof He)return{type:"redirect",location:k.location};let P=500,$;if(S!=null&&S.includes(k))P=(L=k.status)!=null?L:P,$=k.error;else if(k instanceof ae)P=k.status,$=k.body;else{if(await G.updated.check())return await z(n);$=await ee(k,{params:i,url:n,route:{id:a.id}})}const J=await Ue(p,M,c);return J?await Z({url:n,params:i,branch:M.slice(0,J.idx).concat(J.node),status:P,error:$,route:a}):await je(n,{id:a.id},$,P)}else M.push(void 0);return await Z({url:n,params:i,branch:M,status:200,error:null,route:a,form:s?void 0:null})}async function Ue(e,s,n){for(;e--;)if(n[e]){let i=e;for(;!s[i];)i-=1;try{return{idx:i+1,node:{node:await n[e](),loader:n[e],data:{},server:null,universal:null}}}catch{continue}}}async function se({status:e,error:s,url:n,route:i}){var b;const a={};let c=null;if(t.server_loads[0]===0)try{const I=await Be(n,[!0]);if(I.type!=="data"||I.nodes[0]&&I.nodes[0].type!=="data")throw 0;c=(b=I.nodes[0])!=null?b:null}catch{(n.origin!==Me||n.pathname!==location.pathname||N)&&await z(n)}const y=await de({loader:o,url:n,params:a,route:i,parent:()=>Promise.resolve({}),server_data_node:he(c)}),_={node:await g(),loader:g,universal:null,server:null,data:null};return await Z({url:n,params:a,branch:[y,_],status:e,error:s,route:null})}function Q(e,s){if(ve(e,H))return;const n=ce(e);for(const i of l){const a=i.exec(n);if(a)return{id:e.pathname+e.search,invalidating:s,route:i,params:rt(a),url:e}}}function ce(e){return at(e.pathname.slice(H.length)||"/")}function Ne({url:e,type:s,intent:n,delta:i}){let a=!1;const c=Ge(h,n,e,s);i!==void 0&&(c.navigation.delta=i);const d={...c.navigation,cancel:()=>{a=!0,c.reject(new Error("navigation was cancelled"))}};return j||w.before_navigate.forEach(y=>y(d)),a?null:c}async function le({url:e,scroll:s,keepfocus:n,redirect_count:i,details:a,type:c,delta:d,nav_token:y={},accepted:_,blocked:b}){var C,M,L;const I=Q(e,!1),A=Ne({url:e,type:c,delta:d,intent:I});if(!A){b();return}const O=U;_(),j=!0,x&&G.navigating.set(A.navigation),Y=y;let v=I&&await pe(I);if(!v){if(ve(e,H))return await z(e);v=await je(e,{id:null},await ee(new Error(`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=(I==null?void 0:I.url)||e,Y!==y)return A.reject(new Error("navigation was aborted")),!1;if(v.type==="redirect")if(i>=20)v=await se({status:500,error:await ee(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return oe(new URL(v.location,e).href,{},i+1,y),!1;else((C=v.props.page)==null?void 0:C.status)>=400&&await G.updated.check()&&await z(e);if(E.length=0,W=!1,T=!0,Ee(O),Ae(O),(M=v.props.page)!=null&&M.url&&v.props.page.url.pathname!==e.pathname&&(e.pathname=(L=v.props.page)==null?void 0:L.url.pathname),a){const p=a.replaceState?0:1;if(a.state[V]=U+=p,history[a.replaceState?"replaceState":"pushState"](a.state,"",e),!a.replaceState){let k=U+1;for(;te[k]||K[k];)delete te[k],delete K[k],k+=1}}if(m=null,x){h=v.state,v.props.page&&(v.props.page.url=e);const p=(await Promise.all(w.on_navigate.map(k=>k(A.navigation)))).filter(k=>typeof k=="function");if(p.length>0){let k=function(){w.after_navigate=w.after_navigate.filter(P=>!p.includes(P))};p.push(k),w.after_navigate.push(...p)}q.$set(v.props)}else Oe(v);const{activeElement:S}=document;if(await ye(),R){const p=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));s?scrollTo(s.x,s.y):p?p.scrollIntoView():scrollTo(0,0)}const F=document.activeElement!==S&&document.activeElement!==document.body;!n&&!F&&Se(),R=!0,v.props.page&&(B=v.props.page),j=!1,c==="popstate"&&Ie(U),A.fulfil(void 0),w.after_navigate.forEach(p=>p(A.navigation)),G.navigating.set(null),T=!1}async function je(e,s,n,i){return e.origin===Me&&e.pathname===location.pathname&&!N?await se({status:i,error:n,url:e,route:s}):await z(e)}function et(){let e;u.addEventListener("mousemove",c=>{const d=c.target;clearTimeout(e),e=setTimeout(()=>{i(d,2)},20)});function s(c){i(c.composedPath()[0],1)}u.addEventListener("mousedown",s),u.addEventListener("touchstart",s,{passive:!0});const n=new IntersectionObserver(c=>{for(const d of c)d.isIntersecting&&(ie(ce(new URL(d.target.href))),n.unobserve(d.target))},{threshold:0});function i(c,d){const y=Fe(c,u);if(!y)return;const{url:_,external:b,download:I}=_e(y,H);if(b||I)return;const A=fe(y);if(!A.reload)if(d<=A.preload_data){const O=Q(_,!1);O&&Pe(O)}else d<=A.preload_code&&ie(ce(_))}function a(){n.disconnect();for(const c of u.querySelectorAll("a")){const{url:d,external:y,download:_}=_e(c,H);if(y||_)continue;const b=fe(c);b.reload||(b.preload_code===Ve.viewport&&n.observe(c),b.preload_code===Ve.eager&&ie(ce(d)))}}w.after_navigate.push(a),a()}function ee(e,s){var n;return e instanceof ae?e.body:(n=t.hooks.handleError({error:e,event:s}))!=null?n:{message:s.route.id===null&&e instanceof Ot?"Not Found":"Internal Error"}}return{after_navigate:e=>{we(()=>(w.after_navigate.push(e),()=>{const s=w.after_navigate.indexOf(e);w.after_navigate.splice(s,1)}))},before_navigate:e=>{we(()=>(w.before_navigate.push(e),()=>{const s=w.before_navigate.indexOf(e);w.before_navigate.splice(s,1)}))},on_navigate:e=>{we(()=>(w.on_navigate.push(e),()=>{const s=w.on_navigate.indexOf(e);w.on_navigate.splice(s,1)}))},disable_scroll_handling:()=>{(T||!x)&&(R=!1)},goto:(e,s={})=>oe(e,s,0),invalidate:e=>{if(typeof e=="function")E.push(e);else{const{href:s}=new URL(e,location.href);E.push(n=>n.href===s)}return Re()},invalidate_all:()=>(W=!0,Re()),preload_data:async e=>{const s=new URL(e,De(document)),n=Q(s,!1);if(!n)throw new Error(`Attempted to preload a URL that does not belong to this app: ${s}`);await Pe(n)},preload_code:ie,apply_action:async e=>{var s;if(e.type==="error"){const n=new URL(location.href),{branch:i,route:a}=h;if(!a)return;const c=await Ue(h.branch.length,i,a.errors);if(c){const d=await Z({url:n,params:h.params,branch:i.slice(0,c.idx).concat(c.node),status:(s=e.status)!=null?s:500,error:e.error,route:a});h=d.state,q.$set(d.props),ye().then(Se)}}else e.type==="redirect"?oe(e.location,{invalidateAll:!0},0):(q.$set({form:null,page:{...B,form:e.data,status:e.status}}),await ye(),q.$set({form:e.data}),e.type==="success"&&Se())},_start_router:()=>{var s;history.scrollRestoration="manual",addEventListener("beforeunload",n=>{let i=!1;if(Le(),!j){const a=Ge(h,void 0,null,"leave"),c={...a.navigation,cancel:()=>{i=!0,a.reject(new Error("navigation was cancelled"))}};w.before_navigate.forEach(d=>d(c))}i?(n.preventDefault(),n.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Le()}),(s=navigator.connection)!=null&&s.saveData||et(),u.addEventListener("click",n=>{var O,v,S;if(n.button||n.which!==1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey||n.defaultPrevented)return;const i=Fe(n.composedPath()[0],u);if(!i)return;const{url:a,external:c,target:d,download:y}=_e(i,H);if(!a)return;if(d==="_parent"||d==="_top"){if(window.parent!==window)return}else if(d&&d!=="_self")return;const _=fe(i);if(!(i instanceof SVGAElement)&&a.protocol!==location.protocol&&!(a.protocol==="https:"||a.protocol==="http:")||y)return;if(c||_.reload){Ne({url:a,type:"link"})?j=!0:n.preventDefault();return}const[I,A]=a.href.split("#");if(A!==void 0&&I===location.href.split("#")[0]){if(h.url.hash===a.hash){n.preventDefault(),(O=i.ownerDocument.getElementById(A))==null||O.scrollIntoView();return}if(D=!0,Ee(U),e(a),!_.replace_state)return;D=!1,n.preventDefault()}le({url:a,scroll:_.noscroll?ne():null,keepfocus:(v=_.keep_focus)!=null?v:!1,redirect_count:0,details:{state:{},replaceState:(S=_.replace_state)!=null?S:a.href===location.href},accepted:()=>n.preventDefault(),blocked:()=>n.preventDefault(),type:"link"})}),u.addEventListener("submit",n=>{var S;if(n.defaultPrevented)return;const i=HTMLFormElement.prototype.cloneNode.call(n.target),a=n.submitter;if(((a==null?void 0:a.formMethod)||i.method)!=="get")return;const d=new URL((a==null?void 0:a.hasAttribute("formaction"))&&(a==null?void 0:a.formAction)||i.action);if(ve(d,H))return;const y=n.target,{keep_focus:_,noscroll:b,reload:I,replace_state:A}=fe(y);if(I)return;n.preventDefault(),n.stopPropagation();const O=new FormData(y),v=a==null?void 0:a.getAttribute("name");v&&O.append(v,(S=a==null?void 0:a.getAttribute("value"))!=null?S:""),d.search=new URLSearchParams(O).toString(),le({url:d,scroll:b?ne():null,keepfocus:_!=null?_:!1,redirect_count:0,details:{state:{},replaceState:A!=null?A:d.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",async n=>{var i,a;if(Y={},(i=n.state)!=null&&i[V]){if(n.state[V]===U)return;const c=K[n.state[V]],d=new URL(location.href);if(((a=h.url)==null?void 0:a.href.split("#")[0])===location.href.split("#")[0]){e(d),K[U]=ne(),U=n.state[V],scrollTo(c.x,c.y);return}const y=n.state[V]-U;await le({url:d,scroll:c,keepfocus:!1,redirect_count:0,details:null,accepted:()=>{U=n.state[V]},blocked:()=>{history.go(-y)},type:"popstate",delta:y,nav_token:Y})}else if(!D){const c=new URL(location.href);e(c)}}),addEventListener("hashchange",()=>{D&&(D=!1,history.replaceState({...history.state,[V]:++U},"",location.href))});for(const n of document.querySelectorAll("link"))n.rel==="icon"&&(n.href=n.href);addEventListener("pageshow",n=>{n.persisted&&G.navigating.set(null)});function e(n){h.url=n,G.page.set({...B,url:n}),G.page.notify()}},_hydrate:async({status:e=200,error:s,node_ids:n,params:i,route:a,data:c,form:d})=>{N=!0;const y=new URL(location.href);({params:i={},route:a={id:null}}=Q(y,!1)||{});let _;try{const b=n.map(async(O,v)=>{const S=c[v];return S!=null&&S.uses&&(S.uses=Qe(S.uses)),de({loader:t.nodes[O],url:y,params:i,route:a,parent:async()=>{const F={};for(let C=0;C<v;C+=1)Object.assign(F,(await b[C]).data);return F},server_data_node:he(S)})}),I=await Promise.all(b),A=l.find(({id:O})=>O===a.id);if(A){const O=A.layouts;for(let v=0;v<O.length;v++)O[v]||I.splice(v,0,void 0)}_=await Z({url:y,params:i,branch:I,status:e,error:s,form:d,route:A!=null?A:null})}catch(b){if(b instanceof He){await z(new URL(b.location,location.href));return}_=await se({status:b instanceof ae?b.status:500,error:await ee(b,{url:y,params:i,route:a}),url:y,route:a})}Oe(_)}}}async function Be(t,r){var g;const l=new URL(t);l.pathname=lt(t.pathname),t.pathname.endsWith("/")&&l.searchParams.append(Ut,"1"),l.searchParams.append(xt,r.map(u=>u?"1":"0").join(""));const o=await Ye(l.href);if((g=o.headers.get("content-type"))!=null&&g.includes("text/html")&&await z(t),!o.ok)throw new ae(o.status,await o.json());return new Promise(async u=>{var N;const E=new Map,f=o.body.getReader(),m=new TextDecoder;function w(x){return At(x,{Promise:R=>new Promise((T,j)=>{E.set(R,{fulfil:T,reject:j})})})}let h="";for(;;){const{done:x,value:R}=await f.read();if(x&&!h)break;for(h+=!R&&h?`
`:m.decode(R);;){const T=h.indexOf(`
`);if(T===-1)break;const j=JSON.parse(h.slice(0,T));if(h=h.slice(T+1),j.type==="redirect")return u(j);if(j.type==="data")(N=j.nodes)==null||N.forEach(D=>{(D==null?void 0:D.type)==="data"&&(D.uses=Qe(D.uses),D.data=w(D.data))}),u(j);else if(j.type==="chunk"){const{id:D,data:W,error:q}=j,U=E.get(D);E.delete(D),q?U.reject(w(q)):U.fulfil(w(W))}}}})}function Qe(t){var r,l;return{dependencies:new Set((r=t==null?void 0:t.dependencies)!=null?r:[]),params:new Set((l=t==null?void 0:t.params)!=null?l:[]),parent:!!(t!=null&&t.parent),route:!!(t!=null&&t.route),url:!!(t!=null&&t.url)}}function Se(){const t=document.querySelector("[autofocus]");if(t)t.focus();else{const r=document.body,l=r.getAttribute("tabindex");r.tabIndex=-1,r.focus({preventScroll:!0,focusVisible:!1}),l!==null?r.setAttribute("tabindex",l):r.removeAttribute("tabindex");const o=getSelection();if(o&&o.type!=="None"){const g=[];for(let u=0;u<o.rangeCount;u+=1)g.push(o.getRangeAt(u));setTimeout(()=>{if(o.rangeCount===g.length){for(let u=0;u<o.rangeCount;u+=1){const E=g[u],f=o.getRangeAt(u);if(E.commonAncestorContainer!==f.commonAncestorContainer||E.startContainer!==f.startContainer||E.endContainer!==f.endContainer||E.startOffset!==f.startOffset||E.endOffset!==f.endOffset)return}o.removeAllRanges()}})}}}function Ge(t,r,l,o){var m,w,h,N,x;let g,u;const E=new Promise((R,T)=>{g=R,u=T});return E.catch(()=>{}),{navigation:{from:{params:t.params,route:{id:(w=(m=t.route)==null?void 0:m.id)!=null?w:null},url:t.url},to:l&&{params:(h=r==null?void 0:r.params)!=null?h:null,route:{id:(x=(N=r==null?void 0:r.route)==null?void 0:N.id)!=null?x:null},url:l},willUnload:!r,type:o,complete:E},fulfil:g,reject:u}}async function Tt(t,r,l){const o=Nt(t,r);tt({client:o}),l?await o._hydrate(l):o.goto(location.href,{replaceState:!0}),o._start_router()}export{Tt as start};
