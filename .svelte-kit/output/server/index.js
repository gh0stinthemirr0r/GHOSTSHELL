import{b as C,a as L,r as wt,p as _e,o as yt,s as bt,c as $t,g as kt}from"./chunks/internal.js";import*as H from"devalue";import{w as me,r as vt}from"./chunks/index.js";import{parse as K,serialize as ze}from"cookie";import*as ge from"set-cookie-parser";const we=!1,xt="/_svelte_kit_assets",Ne=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],Et=["GET","POST","HEAD"];function ie(e,t){const r=[];e.split(",").forEach((a,o)=>{const l=/([^/]+)\/([^;]+)(?:;q=([0-9.]+))?/.exec(a);if(l){const[,c,u,i="1"]=l;r.push({type:c,subtype:u,q:+i,i:o})}}),r.sort((a,o)=>a.q!==o.q?o.q-a.q:a.subtype==="*"!=(o.subtype==="*")?a.subtype==="*"?1:-1:a.type==="*"!=(o.type==="*")?a.type==="*"?1:-1:a.i-o.i);let n,s=1/0;for(const a of t){const[o,l]=a.split("/"),c=r.findIndex(u=>(u.type===o||u.type==="*")&&(u.subtype===l||u.subtype==="*"));c!==-1&&c<s&&(n=a,s=c)}return n}function St(e,...t){const r=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(r.toLowerCase())}function Ie(e){return St(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}class z{constructor(t,r){this.status=t,typeof r=="string"?this.body={message:r}:r?this.body=r:this.body={message:`Error: ${t}`}}toString(){return JSON.stringify(this.body)}}class N{constructor(t,r){this.status=t,this.location=r}}class De extends Error{constructor(t){super(),this.status=404,this.message=`Not found: ${t}`}}class ce{constructor(t,r){this.status=t,this.data=r}}function jt(e,t,r){const n={},s=e.slice(1),a=s.filter(l=>l!==void 0);let o=0;for(let l=0;l<t.length;l+=1){const c=t[l];let u=s[l-o];if(c.chained&&c.rest&&o&&(u=s.slice(l-o,l+1).filter(i=>i).join("/"),o=0),u===void 0){c.rest&&(n[c.name]="");continue}if(!c.matcher||r[c.matcher](u)){n[c.name]=u;const i=t[l+1],m=s[l+1];i&&!i.rest&&i.optional&&m&&c.chained&&(o=0),!i&&!m&&Object.keys(n).length===a.length&&(o=0);continue}if(c.optional&&c.chained){o++;continue}return}if(!o)return n}function le(e,t){if(isNaN(e)||e<400||e>599)throw new Error(`HTTP error status codes must be between 400 and 599 â€” ${e} is invalid`);return new z(e,t)}function ue(e,t){const r=JSON.stringify(e),n=new Headers(t?.headers);return n.has("content-length")||n.set("content-length",Le.encode(r).byteLength.toString()),n.has("content-type")||n.set("content-type","application/json"),new Response(r,{...t,headers:n})}const Le=new TextEncoder;function A(e,t){const r=new Headers(t?.headers);if(!r.has("content-length")){const n=Le.encode(e);return r.set("content-length",n.byteLength.toString()),new Response(n,{...t,headers:r})}return new Response(e,{...t,headers:r})}function Rt(e){return e instanceof Error||e&&e.name&&e.message?e:new Error(JSON.stringify(e))}function We(e,t){return A(`${t} method not allowed`,{status:405,headers:{allow:Tt(e).join(", ")}})}function Tt(e){const t=Ne.filter(r=>r in e);return("GET"in e||"HEAD"in e)&&t.push("HEAD"),t}function X(e,t,r){let n=e.templates.error({status:t,message:r});return A(n,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function ye(e,t,r){r=r instanceof z?r:Rt(r);const n=r instanceof z?r.status:500,s=await P(e,t,r),a=ie(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||a==="application/json"?ue(s,{status:n}):X(t,n,s.message)}async function P(e,t,r){return r instanceof z?r.body:await t.hooks.handleError({error:r,event:e})??{message:e.route.id===null&&r instanceof De?"Not Found":"Internal Error"}}function Q(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function Ge(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (data${t.path})`:t.path===""?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function Je(e){const t=[];return e.uses&&e.uses.dependencies.size>0&&t.push(`"dependencies":${JSON.stringify(Array.from(e.uses.dependencies))}`),e.uses&&e.uses.params.size>0&&t.push(`"params":${JSON.stringify(Array.from(e.uses.params))}`),e.uses?.parent&&t.push('"parent":1'),e.uses?.route&&t.push('"route":1'),e.uses?.url&&t.push('"url":1'),`"uses":{${t.join(",")}}`}function be(e,t=0){console.warn(e)}async function Ot(e,t,r){const n=e.request.method;let s=t[n]||t.fallback;if(n==="HEAD"&&t.GET&&!t.HEAD&&(s=t.GET),!s)return We(t,n);const a=t.prerender??r.prerender_default;if(a&&(t.POST||t.PATCH||t.PUT||t.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(r.prerendering&&!a){if(r.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}try{let o=await s(e);if(!(o instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);return r.prerendering&&(o=new Response(o.body,{status:o.status,statusText:o.statusText,headers:new Headers(o.headers)}),o.headers.set("x-sveltekit-prerender",String(a))),o}catch(o){if(o instanceof N)return new Response(void 0,{status:o.status,headers:{location:o.location}});throw o}}function At(e){const{method:t,headers:r}=e.request;if(Ne.includes(t)&&!Et.includes(t))return!0;if(t==="POST"&&r.get("x-sveltekit-action")==="true")return!1;const n=e.request.headers.get("accept")??"*/*";return ie(n,["*","text/html"])!=="text/html"}function $e(e){return e.filter(t=>t!=null)}const Pt=/^[a-z][a-z\d+\-.]+:/i,ke=/^([a-z]+:)?\/?\//;function qt(e,t){if(Pt.test(t))return t;if(t[0]==="#")return e+t;const r=ke.exec(e),n=ke.exec(t);if(!r)throw new Error(`bad base path: "${e}"`);const s=n?[]:e.slice(r[0].length).split("/"),a=n?t.slice(n[0].length).split("/"):t.split("/");s.pop();for(let l=0;l<a.length;l+=1){const c=a[l];c!=="."&&(c===".."?s.pop():s.push(c))}return`${n&&n[0]||r&&r[0]||""}${s.join("/")}`}function de(e,t){return e==="/"||t==="ignore"?e:t==="never"?e.endsWith("/")?e.slice(0,-1):e:t==="always"&&!e.endsWith("/")?e+"/":e}function Ct(e){return e.split("%25").map(decodeURI).join("%25")}function Ht(e){for(const t in e)e[t]=decodeURIComponent(e[t]);return e}const Ut=["href","pathname","search","searchParams","toString","toJSON"];function zt(e,t){const r=new URL(e);for(const n of Ut)Object.defineProperty(r,n,{get(){return t(),e[n]},enumerable:!0,configurable:!0});return r[Symbol.for("nodejs.util.inspect.custom")]=(n,s,a)=>a(e,s),Nt(r),r}function Nt(e){Fe(e),Object.defineProperty(e,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}function Me(e){Fe(e);for(const t of["search","searchParams"])Object.defineProperty(e,t,{get(){throw new Error(`Cannot access url.${t} on a page with prerendering enabled`)}})}function Fe(e){e[Symbol.for("nodejs.util.inspect.custom")]=(t,r,n)=>n(new URL(e),r)}const fe="/__data.json";function It(e){return e.endsWith(fe)}function Dt(e){return e.replace(/\/$/,"")+fe}function ve(e){return e.slice(0,-fe.length)}function Be(e){return ie(e.request.headers.get("accept")??"*/*",["application/json","text/html"])==="application/json"&&e.request.method==="POST"}async function Lt(e,t,r){const n=r?.actions;if(!n){const s=le(405,"POST method not allowed. No actions exist for this page");return J({type:"error",error:await P(e,t,s)},{status:s.status,headers:{allow:"GET"}})}Xe(n);try{const s=await Qe(e,n);return s instanceof ce?J({type:"failure",status:s.status,data:xe(s.data,e.route.id)}):J({type:"success",status:s?200:204,data:xe(s,e.route.id)})}catch(s){const a=s;return a instanceof N?Ke(a):J({type:"error",error:await P(e,t,Ve(a))},{status:a instanceof z?a.status:500})}}function Ve(e){return e instanceof ce?new Error('Cannot "throw fail()". Use "return fail()"'):e}function Ke(e){return J({type:"redirect",status:e.status,location:e.location})}function J(e,t){return ue(e,t)}function Wt(e){return e.request.method==="POST"}async function Gt(e,t){const r=t?.actions;if(!r)return e.setHeaders({allow:"GET"}),{type:"error",error:le(405,"POST method not allowed. No actions exist for this page")};Xe(r);try{const n=await Qe(e,r);return n instanceof ce?{type:"failure",status:n.status,data:n.data}:{type:"success",status:200,data:n}}catch(n){const s=n;return s instanceof N?{type:"redirect",status:s.status,location:s.location}:{type:"error",error:Ve(s)}}}function Xe(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://kit.svelte.dev/docs/form-actions#named-actions")}async function Qe(e,t){const r=new URL(e.request.url);let n="default";for(const a of r.searchParams)if(a[0].startsWith("/")){if(n=a[0].slice(1),n==="default")throw new Error('Cannot use reserved action name "default"');break}const s=t[n];if(!s)throw new Error(`No action with name '${n}' found`);if(!Ie(e.request))throw new Error(`Actions expect form-encoded data (received ${e.request.headers.get("content-type")})`);return s(e)}function Jt(e,t){return Ye(e,H.uneval,t)}function xe(e,t){return Ye(e,H.stringify,t)}function Ye(e,t,r){try{return t(e)}catch(n){const s=n;if("path"in s){let a=`Data returned from action inside ${r} is not serializable: ${s.message}`;throw s.path!==""&&(a+=` (data.${s.path})`),new Error(a)}throw s}}async function Ze(e,t){for(const r in e)if(typeof e[r]?.then=="function")return Object.fromEntries(await Promise.all(Object.entries(e).map(async([n,s])=>[n,await s])));return e}const Ee="x-sveltekit-invalidated",Se="x-sveltekit-trailing-slash";async function he({event:e,state:t,node:r,parent:n,track_server_fetches:s}){if(!r?.server)return null;const a={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},o=zt(e.url,()=>{a.url=!0});t.prerendering&&Me(o);const l=await r.server.load?.call(null,{...e,fetch:(u,i)=>{const m=new URL(u instanceof Request?u.url:u,e.url);return s&&a.dependencies.add(m.href),e.fetch(u,i)},depends:(...u)=>{for(const i of u){const{href:m}=new URL(i,e.url);a.dependencies.add(m)}},params:new Proxy(e.params,{get:(u,i)=>(a.params.add(i),u[i])}),parent:async()=>(a.parent=!0,n()),route:new Proxy(e.route,{get:(u,i)=>(a.route=!0,u[i])}),url:o});return{type:"data",data:l?await Ze(l,r.server_id):null,uses:a,slash:r.server.trailingSlash}}async function et({event:e,fetched:t,node:r,parent:n,server_data_promise:s,state:a,resolve_opts:o,csr:l}){const c=await s;if(!r?.universal?.load)return c?.data??null;const u=await r.universal.load.call(null,{url:e.url,params:e.params,data:c?.data??null,route:e.route,fetch:Ft(e,a,t,l,o),setHeaders:e.setHeaders,depends:()=>{},parent:n});return u?await Ze(u,r.universal_id):null}function Mt(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");const t=new Uint8Array(new Uint16Array([1]).buffer)[0]>0;return btoa(new TextDecoder(t?"utf-16le":"utf-16be").decode(new Uint16Array(new Uint8Array(e))))}function Ft(e,t,r,n,s){const a=async(o,l)=>{const c=o instanceof Request&&o.body?o.clone().body:null,u=o instanceof Request&&[...o.headers].length?new Headers(o.headers):l?.headers;let i=await e.fetch(o,l);const m=new URL(o instanceof Request?o.url:o,e.url),g=m.origin===e.url.origin;let _;if(g)t.prerendering&&(_={response:i,body:null},t.prerendering.dependencies.set(m.pathname,_));else if((o instanceof Request?o.mode:l?.mode??"cors")==="no-cors")i=new Response("",{status:i.status,statusText:i.statusText,headers:i.headers});else{const d=i.headers.get("access-control-allow-origin");if(!d||d!==e.url.origin&&d!=="*")throw new Error(`CORS error: ${d?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}const f=new Proxy(i,{get(p,d,y){async function $(w,b){const k=Number(p.status);if(isNaN(k))throw new Error(`response.status is not a number. value: "${p.status}" type: ${typeof p.status}`);r.push({url:g?m.href.slice(e.url.origin.length):m.href,method:e.request.method,request_body:o instanceof Request&&c?await Bt(c):l?.body,request_headers:u,response_body:w,response:p,is_b64:b})}if(d==="arrayBuffer")return async()=>{const w=await p.arrayBuffer();return _&&(_.body=new Uint8Array(w)),w instanceof ArrayBuffer&&await $(Mt(w),!0),w};async function h(){const w=await p.text();return(!w||typeof w=="string")&&await $(w,!1),_&&(_.body=w),w}return d==="text"?h:d==="json"?async()=>JSON.parse(await h()):Reflect.get(p,d,p)}});if(n){const p=i.headers.get;i.headers.get=d=>{const y=d.toLowerCase(),$=p.call(i.headers,y);if($&&!y.startsWith("x-sveltekit-")&&!s.filterSerializedResponseHeaders(y,$))throw new Error(`Failed to get response header "${y}" â€” it must be included by the \`filterSerializedResponseHeaders\` option: https://kit.svelte.dev/docs/hooks#server-hooks-handle (at ${e.route.id})`);return $}}return f};return(o,l)=>{const c=a(o,l);return c.catch(()=>{}),c}}async function Bt(e){let t="";const r=e.getReader(),n=new TextDecoder;for(;;){const{done:s,value:a}=await r.read();if(s)break;t+=n.decode(a)}return t}function tt(...e){let t=5381;for(const r of e)if(typeof r=="string"){let n=r.length;for(;n;)t=t*33^r.charCodeAt(--n)}else if(ArrayBuffer.isView(r)){const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let s=n.length;for(;s;)t=t*33^n[--s]}else throw new TypeError("value must be a string or TypedArray");return(t>>>0).toString(36)}const rt={"&":"&amp;",'"':"&quot;"},Vt=new RegExp(`[${Object.keys(rt).join("")}]|[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]`,"g");function nt(e){return`"${e.replace(Vt,r=>r.length===2?r:rt[r]??`&#${r.charCodeAt(0)};`)}"`}const st={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},Kt=new RegExp(`[${Object.keys(st).join("")}]`,"g");function Xt(e,t,r=!1){const n={};let s=null,a=null,o=!1;for(const[i,m]of e.response.headers)t(i,m)&&(n[i]=m),i==="cache-control"?s=m:i==="age"?a=m:i==="vary"&&m.trim()==="*"&&(o=!0);const l={status:e.response.status,statusText:e.response.statusText,headers:n,body:e.response_body},c=JSON.stringify(l).replace(Kt,i=>st[i]),u=['type="application/json"',"data-sveltekit-fetched",`data-url=${nt(e.url)}`];if(e.is_b64&&u.push("data-b64"),e.request_headers||e.request_body){const i=[];e.request_headers&&i.push([...new Headers(e.request_headers)].join(",")),e.request_body&&i.push(e.request_body),u.push(`data-hash="${tt(...i)}"`)}if(!r&&e.method==="GET"&&s&&!o){const i=/s-maxage=(\d+)/g.exec(s)??/max-age=(\d+)/g.exec(s);if(i){const m=+i[1]-+(a??"0");u.push(`data-ttl="${m}"`)}}return`<script ${u.join(" ")}>${c}<\/script>`}const D=JSON.stringify,Qt=new TextEncoder;function je(e){se[0]||Yt();const t=ot.slice(0),r=Zt(e);for(let s=0;s<r.length;s+=16){const a=r.subarray(s,s+16);let o,l,c,u=t[0],i=t[1],m=t[2],g=t[3],_=t[4],f=t[5],p=t[6],d=t[7];for(let y=0;y<64;y++)y<16?o=a[y]:(l=a[y+1&15],c=a[y+14&15],o=a[y&15]=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(c>>>17^c>>>19^c>>>10^c<<15^c<<13)+a[y&15]+a[y+9&15]|0),o=o+d+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(p^_&(f^p))+se[y],d=p,p=f,f=_,_=g+o|0,g=m,m=i,i=u,u=o+(i&m^g&(i^m))+(i>>>2^i>>>13^i>>>22^i<<30^i<<19^i<<10)|0;t[0]=t[0]+u|0,t[1]=t[1]+i|0,t[2]=t[2]+m|0,t[3]=t[3]+g|0,t[4]=t[4]+_|0,t[5]=t[5]+f|0,t[6]=t[6]+p|0,t[7]=t[7]+d|0}const n=new Uint8Array(t.buffer);return at(n),it(n)}const ot=new Uint32Array(8),se=new Uint32Array(64);function Yt(){function e(r){return(r-Math.floor(r))*4294967296}let t=2;for(let r=0;r<64;t++){let n=!0;for(let s=2;s*s<=t;s++)if(t%s===0){n=!1;break}n&&(r<8&&(ot[r]=e(t**(1/2))),se[r]=e(t**(1/3)),r++)}}function at(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],n=e[t+1],s=e[t+2],a=e[t+3];e[t+0]=a,e[t+1]=s,e[t+2]=n,e[t+3]=r}}function Zt(e){const t=Qt.encode(e),r=t.length*8,n=512*Math.ceil((r+65)/512),s=new Uint8Array(n/8);s.set(t),s[t.length]=128,at(s);const a=new Uint32Array(s.buffer);return a[a.length-2]=Math.floor(r/4294967296),a[a.length-1]=r,a}const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function it(e){const t=e.length;let r="",n;for(n=2;n<t;n+=3)r+=U[e[n-2]>>2],r+=U[(e[n-2]&3)<<4|e[n-1]>>4],r+=U[(e[n-1]&15)<<2|e[n]>>6],r+=U[e[n]&63];return n===t+1&&(r+=U[e[n-2]>>2],r+=U[(e[n-2]&3)<<4],r+="=="),n===t&&(r+=U[e[n-2]>>2],r+=U[(e[n-2]&3)<<4|e[n-1]>>4],r+=U[(e[n-1]&15)<<2],r+="="),r}const Re=new Uint8Array(16);function er(){return crypto.getRandomValues(Re),it(Re)}const tr=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),rr=/^(nonce|sha\d\d\d)-/;class ct{#e;#t;#s;#o;#r;#n;#a;constructor(t,r,n){this.#e=t,this.#o=r;const s=this.#o;this.#r=[],this.#n=[];const a=s["script-src"]||s["default-src"],o=s["style-src"]||s["default-src"];this.#t=!!a&&a.filter(l=>l!=="unsafe-inline").length>0,this.#s=!!o&&o.filter(l=>l!=="unsafe-inline").length>0,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#s&&!this.#e,this.#a=n}add_script(t){this.#t&&(this.#e?this.#r.push(`sha256-${je(t)}`):this.#r.length===0&&this.#r.push(`nonce-${this.#a}`))}add_style(t){this.#s&&(this.#e?this.#n.push(`sha256-${je(t)}`):this.#n.length===0&&this.#n.push(`nonce-${this.#a}`))}get_header(t=!1){const r=[],n={...this.#o};this.#n.length>0&&(n["style-src"]=[...n["style-src"]||n["default-src"]||[],...this.#n]),this.#r.length>0&&(n["script-src"]=[...n["script-src"]||n["default-src"]||[],...this.#r]);for(const s in n){if(t&&(s==="frame-ancestors"||s==="report-uri"||s==="sandbox"))continue;const a=n[s];if(!a)continue;const o=[s];Array.isArray(a)&&a.forEach(l=>{tr.has(l)||rr.test(l)?o.push(`'${l}'`):o.push(l)}),r.push(o.join(" "))}return r.join("; ")}}class nr extends ct{get_meta(){const t=this.get_header(!0);if(t)return`<meta http-equiv="content-security-policy" content=${nt(t)}>`}}class sr extends ct{constructor(t,r,n){if(super(t,r,n),Object.values(r).filter(s=>!!s).length>0){const s=r["report-to"]?.length??0>0,a=r["report-uri"]?.length??0>0;if(!s&&!a)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class or{nonce=er();csp_provider;report_only_provider;constructor({mode:t,directives:r,reportOnly:n},{prerender:s}){const a=t==="hash"||t==="auto"&&s;this.csp_provider=new nr(a,r,this.nonce),this.report_only_provider=new sr(a,n,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(t){this.csp_provider.add_script(t),this.report_only_provider.add_script(t)}add_style(t){this.csp_provider.add_style(t),this.report_only_provider.add_style(t)}}function Te(){let e,t;return{promise:new Promise((n,s)=>{e=n,t=s}),fulfil:e,reject:t}}function lt(){const e=[Te()];return{iterator:{[Symbol.asyncIterator](){return{next:async()=>{const t=await e[0].promise;return t.done||e.shift(),t}}}},push:t=>{e[e.length-1].fulfil({value:t,done:!1}),e.push(Te())},done:()=>{e[e.length-1].fulfil({done:!0})}}}const ar={...vt(!1),check:()=>!1},Oe=new TextEncoder;async function M({branch:e,fetched:t,options:r,manifest:n,state:s,page_config:a,status:o,error:l=null,event:c,resolve_opts:u,action_result:i}){if(s.prerendering){if(r.csp.mode==="nonce")throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(r.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:m}=n._,g=new Set(m.imports),_=new Set(m.stylesheets),f=new Set(m.fonts),p=new Set,d=new Map;let y;const $=i?.type==="success"||i?.type==="failure"?i.data??null:null;let h=C,w=L,b=D(C);if(s.prerendering?.fallback||(h=c.url.pathname.slice(C.length).split("/").slice(2).map(()=>"..").join("/")||".",b=`new URL(${D(h)}, location).pathname.slice(0, -1)`,(!L||L[0]==="/"&&L!==xt)&&(w=h)),a.ssr){const v={stores:{page:me(null),navigating:me(null),updated:ar},constructors:await Promise.all(e.map(({node:R})=>R.component())),form:$};let E={};for(let R=0;R<e.length;R+=1)E={...E,...e[R].data},v[`data_${R}`]=E;v.page={error:l,params:c.params,route:c.route,status:o,url:c.url,data:E,form:$};try{y=r.root.render(v)}finally{wt()}for(const{node:R}of e){for(const T of R.imports)g.add(T);for(const T of R.stylesheets)_.add(T);for(const T of R.fonts)f.add(T);R.inline_styles&&Object.entries(await R.inline_styles()).forEach(([T,V])=>d.set(T,V))}}else y={head:"",html:"",css:{code:"",map:null}};let k="",S=y.html;const x=new or(r.csp,{prerender:!!s.prerendering}),j=v=>v.startsWith("/")?C+v:`${w}/${v}`;if(d.size>0){const v=Array.from(d.values()).join(`
`),E=[];x.style_needs_nonce&&E.push(` nonce="${x.nonce}"`),x.add_style(v),k+=`
	<style${E.join("")}>${v}</style>`}for(const v of _){const E=j(v),R=['rel="stylesheet"'];if(d.has(v))R.push("disabled",'media="(max-width: 0)"');else if(u.preload({type:"css",path:E})){const T=['rel="preload"','as="style"'];p.add(`<${encodeURI(E)}>; ${T.join(";")}; nopush`)}k+=`
		<link href="${E}" ${R.join(" ")}>`}for(const v of f){const E=j(v);if(u.preload({type:"font",path:E})){const T=['rel="preload"','as="font"',`type="font/${v.slice(v.lastIndexOf(".")+1)}"`,`href="${E}"`,"crossorigin"];k+=`
		<link ${T.join(" ")}>`}}const W=`__sveltekit_${r.version_hash}`,{data:I,chunks:B}=ir(c,r,e.map(v=>v.server_data),W);if(a.ssr&&a.csr&&(S+=`
			${t.map(v=>Xt(v,u.filterSerializedResponseHeaders,!!s.prerendering)).join(`
			`)}`),a.csr){const v=Array.from(g,O=>j(O)).filter(O=>u.preload({type:"js",path:O}));for(const O of v)p.add(`<${encodeURI(O)}>; rel="modulepreload"; nopush`),r.preload_strategy!=="modulepreload"?k+=`
		<link rel="preload" as="script" crossorigin="anonymous" href="${O}">`:s.prerendering&&(k+=`
		<link rel="modulepreload" href="${O}">`);const E=[],R=[L&&`assets: ${D(L)}`,`base: ${b}`,`env: ${D(_e)}`].filter(Boolean);B&&(E.push("const deferred = new Map();"),R.push(`defer: (id) => new Promise((fulfil, reject) => {
							deferred.set(id, { fulfil, reject });
						})`),R.push(`resolve: ({ id, data, error }) => {
							const { fulfil, reject } = deferred.get(id);
							deferred.delete(id);

							if (error) reject(error);
							else fulfil(data);
						}`)),E.push(`${W} = {
						${R.join(`,
						`)}
					};`);const T=["app","element"];if(E.push("const element = document.currentScript.parentElement;"),a.ssr){const O={form:"null",error:"null"};E.push(`const data = ${I};`),$&&(O.form=Jt($,c.route.id)),l&&(O.error=H.uneval(l));const ee=[`node_ids: [${e.map(({node:gt})=>gt.index).join(", ")}]`,"data",`form: ${O.form}`,`error: ${O.error}`];o!==200&&ee.push(`status: ${o}`),r.embedded&&ee.push(`params: ${H.uneval(c.params)}`,`route: ${D(c.route)}`),T.push(`{
							${ee.join(`,
							`)}
						}`)}if(E.push(`Promise.all([
						import(${D(j(m.start))}),
						import(${D(j(m.app))})
					]).then(([kit, app]) => {
						kit.start(${T.join(", ")});
					});`),r.service_worker){const O="";E.push(`if ('serviceWorker' in navigator) {
						addEventListener('load', function () {
							navigator.serviceWorker.register('${j("service-worker.js")}'${O});
						});
					}`)}const V=`
				{
					${E.join(`

					`)}
				}
			`;x.add_script(V),S+=`
			<script${x.script_needs_nonce?` nonce="${x.nonce}"`:""}>${V}<\/script>
		`}const G=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(s.prerendering){const v=[],E=x.csp_provider.get_meta();E&&v.push(E),s.prerendering.cache&&v.push(`<meta http-equiv="cache-control" content="${s.prerendering.cache}">`),v.length>0&&(k=v.join(`
`)+k)}else{const v=x.csp_provider.get_header();v&&G.set("content-security-policy",v);const E=x.report_only_provider.get_header();E&&G.set("content-security-policy-report-only",E),p.size&&G.set("link",Array.from(p).join(", "))}k+=y.head;const mt=r.templates.app({head:k,body:S,assets:w,nonce:x.nonce,env:_e}),Z=await u.transformPageChunk({html:mt,done:!0})||"";return B||G.set("etag",`"${tt(Z)}"`),B?new Response(new ReadableStream({async start(v){v.enqueue(Oe.encode(Z+`
`));for await(const E of B)v.enqueue(Oe.encode(E));v.close()},type:"bytes"}),{headers:{"content-type":"text/html"}}):A(Z,{status:o,headers:G})}function ir(e,t,r,n){let s=1,a=0;const{iterator:o,push:l,done:c}=lt();function u(i){if(typeof i?.then=="function"){const m=s++;return a+=1,i.then(g=>({data:g})).catch(async g=>({error:await P(e,t,g)})).then(async({data:g,error:_})=>{a-=1;let f;try{f=H.uneval({id:m,data:g,error:_},u)}catch{_=await P(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),g=void 0,f=H.uneval({id:m,data:g,error:_},u)}l(`<script>${n}.resolve(${f})<\/script>
`),a===0&&c()}),`${n}.defer(${m})`}}try{return{data:`[${r.map(m=>m?`{"type":"data","data":${H.uneval(m.data,u)},${Je(m)}${m.slash?`,"slash":${JSON.stringify(m.slash)}`:""}}`:"null").join(",")}]`,chunks:a>0?o:null}}catch(i){throw new Error(Ge(e,i))}}function q(e,t){return e.reduce((r,n)=>n?.universal?.[t]??n?.server?.[t]??r,void 0)}async function ut({event:e,options:t,manifest:r,state:n,status:s,error:a,resolve_opts:o}){if(e.request.headers.get("x-sveltekit-error"))return X(t,s,a.message);const l=[];try{const c=[],u=await r._.nodes[0](),i=q([u],"ssr")??!0,m=q([u],"csr")??!0;if(i){n.error=!0;const g=he({event:e,state:n,node:u,parent:async()=>({}),track_server_fetches:t.track_server_fetches}),_=await g,f=await et({event:e,fetched:l,node:u,parent:async()=>({}),resolve_opts:o,server_data_promise:g,state:n,csr:m});c.push({node:u,server_data:_,data:f},{node:await r._.nodes[1](),data:null,server_data:null})}return await M({options:t,manifest:r,state:n,page_config:{ssr:i,csr:q([u],"csr")??!0},status:s,error:await P(e,t,a),branch:c,fetched:l,event:e,resolve_opts:o})}catch(c){return c instanceof N?Q(c.status,c.location):X(t,c instanceof z?c.status:500,(await P(e,t,c)).message)}}function cr(e){let t=!1,r;return()=>t?r:(t=!0,r=e())}const Ae=new TextEncoder;async function lr(e,t,r,n,s,a,o){if(!t.page)return new Response(void 0,{status:404});try{const l=[...t.page.layouts,t.page.leaf],c=a??l.map(()=>!0);let u=!1;const i=new URL(e.url);i.pathname=de(i.pathname,o);const m={...e,url:i},g=l.map(($,h)=>cr(async()=>{try{if(u)return{type:"skip"};const w=$==null?$:await n._.nodes[$]();return he({event:m,state:s,node:w,parent:async()=>{const b={};for(let k=0;k<h;k+=1){const S=await g[k]();S&&Object.assign(b,S.data)}return b},track_server_fetches:r.track_server_fetches})}catch(w){throw u=!0,w}})),_=g.map(async($,h)=>c[h]?$():{type:"skip"});let f=_.length;const p=await Promise.all(_.map(($,h)=>$.catch(async w=>{if(w instanceof N)throw w;return f=Math.min(f,h+1),{type:"error",error:await P(e,r,w),status:w instanceof z?w.status:void 0}}))),{data:d,chunks:y}=dt(e,r,p);return y?new Response(new ReadableStream({async start($){$.enqueue(Ae.encode(d));for await(const h of y)$.enqueue(Ae.encode(h));$.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):oe(d)}catch(l){const c=l;return c instanceof N?ae(c):oe(await P(e,r,c),500)}}function oe(e,t=200){return A(typeof e=="string"?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function ae(e){return oe({type:"redirect",location:e.location})}function dt(e,t,r){let n=1,s=0;const{iterator:a,push:o,done:l}=lt(),c={Promise:u=>{if(typeof u?.then=="function"){const i=n++;s+=1;let m="data";return u.catch(async g=>(m="error",P(e,t,g))).then(async g=>{let _;try{_=H.stringify(g,c)}catch{const p=await P(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`));m="error",_=H.stringify(p,c)}s-=1,o(`{"type":"chunk","id":${i},"${m}":${_}}
`),s===0&&l()}),i}}};try{return{data:`{"type":"data","nodes":[${r.map(i=>i?i.type==="error"||i.type==="skip"?JSON.stringify(i):`{"type":"data","data":${H.stringify(i.data,c)},${Je(i)}${i.slash?`,"slash":${JSON.stringify(i.slash)}`:""}}`:"null").join(",")}]}
`,chunks:s>0?a:null}}catch(u){throw new Error(Ge(e,u))}}const ur=10;async function dr(e,t,r,n,s,a){if(s.depth>ur)return A(`Not found: ${e.url.pathname}`,{status:404});if(Be(e)){const o=await n._.nodes[t.leaf]();return Lt(e,r,o?.server)}try{const o=await Promise.all([...t.layouts.map(h=>h==null?h:n._.nodes[h]()),n._.nodes[t.leaf]()]),l=o.at(-1);let c=200,u;if(Wt(e)){if(u=await Gt(e,l.server),u?.type==="redirect")return Q(u.status,u.location);if(u?.type==="error"){const h=u.error;c=h instanceof z?h.status:500}u?.type==="failure"&&(c=u.status)}const i=o.some(h=>h?.server),m=Dt(e.url.pathname),g=q(o,"prerender")??!1;if(g){if(l.server?.actions)throw new Error("Cannot prerender pages with actions")}else if(s.prerendering)return new Response(void 0,{status:204});s.prerender_default=g;const _=[];if(q(o,"ssr")===!1&&!s.prerendering)return await M({branch:[],fetched:_,page_config:{ssr:!1,csr:q(o,"csr")??!0},status:c,error:null,event:e,options:r,manifest:n,state:s,resolve_opts:a});const f=[];let p=null;const d=o.map((h,w)=>{if(p)throw p;return Promise.resolve().then(async()=>{try{if(h===l&&u?.type==="error")throw u.error;return await he({event:e,state:s,node:h,parent:async()=>{const b={};for(let k=0;k<w;k+=1){const S=await d[k];S&&Object.assign(b,await S.data)}return b},track_server_fetches:r.track_server_fetches})}catch(b){throw p=b,p}})}),y=q(o,"csr")??!0,$=o.map((h,w)=>{if(p)throw p;return Promise.resolve().then(async()=>{try{return await et({event:e,fetched:_,node:h,parent:async()=>{const b={};for(let k=0;k<w;k+=1)Object.assign(b,await $[k]);return b},resolve_opts:a,server_data_promise:d[w],state:s,csr:y})}catch(b){throw p=b,p}})});for(const h of d)h.catch(()=>{});for(const h of $)h.catch(()=>{});for(let h=0;h<o.length;h+=1){const w=o[h];if(w)try{const b=await d[h],k=await $[h];f.push({node:w,server_data:b,data:k})}catch(b){const k=b;if(k instanceof N){if(s.prerendering&&i){const j=JSON.stringify({type:"redirect",location:k.location});s.prerendering.dependencies.set(m,{response:A(j),body:j})}return Q(k.status,k.location)}const S=k instanceof z?k.status:500,x=await P(e,r,k);for(;h--;)if(t.errors[h]){const j=t.errors[h],W=await n._.nodes[j]();let I=h;for(;!f[I];)I-=1;return await M({event:e,options:r,manifest:n,state:s,resolve_opts:a,page_config:{ssr:!0,csr:!0},status:S,error:x,branch:$e(f.slice(0,I+1)).concat({node:W,data:null,server_data:null}),fetched:_})}return X(r,S,x.message)}else f.push(null)}if(s.prerendering&&i){let{data:h,chunks:w}=dt(e,r,f.map(b=>b?.server_data));if(w)for await(const b of w)h+=b;s.prerendering.dependencies.set(m,{response:A(h),body:h})}return await M({event:e,options:r,manifest:n,state:s,resolve_opts:a,page_config:{csr:q(o,"csr")??!0,ssr:q(o,"ssr")??!0},status:c,error:null,branch:$e(f),action_result:u,fetched:_})}catch(o){return await ut({event:e,options:r,manifest:n,state:s,status:500,error:o,resolve_opts:a})}}function te(e,t){e.path===void 0&&be(`Calling \`cookies.${t}(...)\` without specifying a \`path\` is deprecated, and will be disallowed in SvelteKit 2.0. Relative paths can be used`,1),e.path===""&&be(`Calling \`cookies.${t}(...)\` with \`path: ''\` will behave differently in SvelteKit 2.0. Instead of using the browser default behaviour, it will set the cookie path to the current pathname`,1)}function fr(e,t,r){const n=e.headers.get("cookie")??"",s=K(n,{decode:g=>g}),o=de(t.pathname,r).split("/").slice(0,-1).join("/")||"/",l={},c={httpOnly:!0,sameSite:"lax",secure:!(t.hostname==="localhost"&&t.protocol==="http:")},u={get(g,_){const f=l[g];if(f&&re(t.hostname,f.options.domain)&&ne(t.pathname,f.options.path))return f.value;const p=_?.decode||decodeURIComponent;return K(n,{decode:p})[g]},getAll(g){const _=g?.decode||decodeURIComponent,f=K(n,{decode:_});for(const p of Object.values(l))re(t.hostname,p.options.domain)&&ne(t.pathname,p.options.path)&&(f[p.name]=p.value);return Object.entries(f).map(([p,d])=>({name:p,value:d}))},set(g,_,f={}){te(f,"set"),m(g,_,{...c,...f})},delete(g,_={}){te(_,"delete"),u.set(g,"",{path:o,..._,maxAge:0})},serialize(g,_,f={}){return te(f,"serialize"),ze(g,_,{...c,...f})}};function i(g,_){const f={...s};for(const p in l){const d=l[p];if(!re(g.hostname,d.options.domain)||!ne(g.pathname,d.options.path))continue;const y=d.options.encode||encodeURIComponent;f[d.name]=y(d.value)}if(_){const p=K(_,{decode:d=>d});for(const d in p)f[d]=p[d]}return Object.entries(f).map(([p,d])=>`${p}=${d}`).join("; ")}function m(g,_,f){let p=f.path;(!f.domain||f.domain===t.hostname)&&(p?p[0]==="."&&(p=qt(t.pathname,p)):p=o),l[g]={name:g,value:_,options:{...f,path:p}}}return{cookies:u,new_cookies:l,get_cookie_header:i,set_internal:m}}function re(e,t){if(!t)return!0;const r=t[0]==="."?t.slice(1):t;return e===r?!0:e.endsWith("."+r)}function ne(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r?!0:e.startsWith(r+"/")}function Pe(e,t){for(const r of t){const{name:n,value:s,options:a}=r;e.append("set-cookie",ze(n,s,a))}}function hr({event:e,options:t,manifest:r,state:n,get_cookie_header:s,set_internal:a}){const o=async(l,c)=>{const u=qe(l,c,e.url);let i=(l instanceof Request?l.mode:c?.mode)??"cors",m=(l instanceof Request?l.credentials:c?.credentials)??"same-origin";return t.hooks.handleFetch({event:e,request:u,fetch:async(g,_)=>{const f=qe(g,_,e.url),p=new URL(f.url);if(f.headers.has("origin")||f.headers.set("origin",e.url.origin),g!==u&&(i=(g instanceof Request?g.mode:_?.mode)??"cors",m=(g instanceof Request?g.credentials:_?.credentials)??"same-origin"),(f.method==="GET"||f.method==="HEAD")&&(i==="no-cors"&&p.origin!==e.url.origin||p.origin===e.url.origin)&&f.headers.delete("origin"),p.origin!==e.url.origin){if(`.${p.hostname}`.endsWith(`.${e.url.hostname}`)&&m!=="omit"){const x=s(p,f.headers.get("cookie"));x&&f.headers.set("cookie",x)}return fetch(f)}const d=L||C,y=decodeURIComponent(p.pathname),$=(y.startsWith(d)?y.slice(d.length):y).slice(1),h=`${$}/index.html`,w=r.assets.has($),b=r.assets.has(h);if(w||b){const x=w?$:h;if(n.read){const j=w?r.mimeTypes[$.slice($.lastIndexOf("."))]:"text/html";return new Response(n.read(x),{headers:j?{"content-type":j}:{}})}return await fetch(f)}if(m!=="omit"){const x=s(p,f.headers.get("cookie"));x&&f.headers.set("cookie",x);const j=e.request.headers.get("authorization");j&&!f.headers.has("authorization")&&f.headers.set("authorization",j)}f.headers.has("accept")||f.headers.set("accept","*/*"),f.headers.has("accept-language")||f.headers.set("accept-language",e.request.headers.get("accept-language"));const k=await _t(f,t,r,{...n,depth:n.depth+1}),S=k.headers.get("set-cookie");if(S)for(const x of ge.splitCookiesString(S)){const{name:j,value:W,...I}=ge.parseString(x);a(j,W,I)}return k}})};return(l,c)=>{const u=o(l,c);return u.catch(()=>{}),u}}function qe(e,t,r){return e instanceof Request?e:new Request(typeof e=="string"?new URL(e,r):e,t)}function F(e){function t(r,n){if(r)for(const s in r){if(s[0]==="_"||e.has(s))continue;const a=[...e.values()],o=pr(s,n?.slice(n.lastIndexOf(".")))??`valid exports are ${a.join(", ")}, or anything with a '_' prefix`;throw new Error(`Invalid export '${s}'${n?` in ${n}`:""} (${o})`)}}return t}function pr(e,t=".js"){const r=[];if(Y.has(e)&&r.push(`+layout${t}`),ft.has(e)&&r.push(`+page${t}`),pe.has(e)&&r.push(`+layout.server${t}`),ht.has(e)&&r.push(`+page.server${t}`),pt.has(e)&&r.push(`+server${t}`),r.length>0)return`'${e}' is a valid export in ${r.slice(0,-1).join(", ")}${r.length>1?" or ":""}${r.at(-1)}`}const Y=new Set(["load","prerender","csr","ssr","trailingSlash","config"]),ft=new Set([...Y,"entries"]),pe=new Set([...Y]),ht=new Set([...pe,"actions","entries"]),pt=new Set(["GET","POST","PATCH","PUT","DELETE","OPTIONS","HEAD","fallback","prerender","trailingSlash","config","entries"]),kr=F(Y),vr=F(ft),xr=F(pe),Er=F(ht),Sr=F(pt),Ce=({html:e})=>e,He=()=>!1,Ue=({type:e})=>e==="js"||e==="css",_r=new Set(["GET","HEAD","POST"]),mr=new Set(["GET","HEAD","OPTIONS"]);async function _t(e,t,r,n){const s=new URL(e.url);if(t.csrf_check_origin&&Ie(e)&&(e.method==="POST"||e.method==="PUT"||e.method==="PATCH"||e.method==="DELETE")&&e.headers.get("origin")!==s.origin){const y=le(403,`Cross-site ${e.method} form submissions are forbidden`);return e.headers.get("accept")==="application/json"?ue(y.body,{status:y.status}):A(y.body.message,{status:y.status})}let a;try{a=Ct(s.pathname)}catch{return A("Malformed URI",{status:400})}let o=null,l={};if(C&&!n.prerendering?.fallback){if(!a.startsWith(C))return A("Not found",{status:404});a=a.slice(C.length)||"/"}const c=It(a);let u;if(c&&(a=ve(a)||"/",s.pathname=ve(s.pathname)+(s.searchParams.get(Se)==="1"?"/":"")||"/",s.searchParams.delete(Se),u=s.searchParams.get(Ee)?.split("").map(d=>d==="1"),s.searchParams.delete(Ee)),!n.prerendering?.fallback){const d=await r._.matchers();for(const y of r._.routes){const $=y.pattern.exec(a);if(!$)continue;const h=jt($,y.params,d);if(h){o=y,l=Ht(h);break}}}let i;const m={};let g={};const _={cookies:null,fetch:null,getClientAddress:n.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-static does not specify getClientAddress. Please raise an issue")}),locals:{},params:l,platform:n.platform,request:e,route:{id:o?.id??null},setHeaders:d=>{for(const y in d){const $=y.toLowerCase(),h=d[y];if($==="set-cookie")throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if($ in m)throw new Error(`"${y}" header is already set`);m[$]=h,n.prerendering&&$==="cache-control"&&(n.prerendering.cache=h)}},url:s,isDataRequest:c,isSubRequest:n.depth>0};let f={transformPageChunk:Ce,filterSerializedResponseHeaders:He,preload:Ue};try{if(o){if(s.pathname===C||s.pathname===C+"/")i="always";else if(o.page){const b=await Promise.all([...o.page.layouts.map(k=>k==null?k:r._.nodes[k]()),r._.nodes[o.page.leaf]()]);i=q(b,"trailingSlash")}else o.endpoint&&(i=(await o.endpoint()).trailingSlash);if(!c){const b=de(s.pathname,i??"never");if(b!==s.pathname&&!n.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(b.startsWith("//")?s.origin+b:b)+(s.search==="?"?"":s.search)}})}}const{cookies:d,new_cookies:y,get_cookie_header:$,set_internal:h}=fr(e,s,i??"never");g=y,_.cookies=d,_.fetch=hr({event:_,options:t,manifest:r,state:n,get_cookie_header:$,set_internal:h}),n.prerendering&&!n.prerendering.fallback&&Me(s);const w=await t.hooks.handle({event:_,resolve:(b,k)=>p(b,k).then(S=>{for(const x in m){const j=m[x];S.headers.set(x,j)}return Pe(S.headers,Object.values(g)),n.prerendering&&b.route.id!==null&&S.headers.set("x-sveltekit-routeid",encodeURI(b.route.id)),S})});if(w.status===200&&w.headers.has("etag")){let b=e.headers.get("if-none-match");b?.startsWith('W/"')&&(b=b.substring(2));const k=w.headers.get("etag");if(b===k){const S=new Headers({etag:k});for(const x of["cache-control","content-location","date","expires","vary","set-cookie"]){const j=w.headers.get(x);j&&S.set(x,j)}return new Response(void 0,{status:304,headers:S})}}if(c&&w.status>=300&&w.status<=308){const b=w.headers.get("location");if(b)return ae(new N(w.status,b))}return w}catch(d){if(d instanceof N){const y=c?ae(d):o?.page&&Be(_)?Ke(d):Q(d.status,d.location);return Pe(y.headers,Object.values(g)),y}return await ye(_,t,d)}async function p(d,y){try{if(y){if("ssr"in y)throw new Error("ssr has been removed, set it in the appropriate +layout.js instead. See the PR for more information: https://github.com/sveltejs/kit/pull/6197");f={transformPageChunk:y.transformPageChunk||Ce,filterSerializedResponseHeaders:y.filterSerializedResponseHeaders||He,preload:y.preload||Ue}}if(n.prerendering?.fallback)return await M({event:d,options:t,manifest:r,state:n,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:f});if(o){const $=d.request.method;let h;if(c)h=await lr(d,o,t,r,n,u,i??"never");else if(o.endpoint&&(!o.page||At(d)))h=await Ot(d,await o.endpoint(),n);else if(o.page)if(_r.has($))h=await dr(d,o.page,t,r,n,f);else{const w=new Set(mr);if((await r._.nodes[o.page.leaf]())?.server?.actions&&w.add("POST"),$==="OPTIONS")h=new Response(null,{status:204,headers:{allow:Array.from(w.values()).join(", ")}});else{const k=[...w].reduce((S,x)=>(S[x]=!0,S),{});h=We(k,$)}}else throw new Error("This should never happen");if(e.method==="GET"&&o.page&&o.endpoint){const w=h.headers.get("vary")?.split(",")?.map(b=>b.trim().toLowerCase());w?.includes("accept")||w?.includes("*")||(h=new Response(h.body,{status:h.status,statusText:h.statusText,headers:new Headers(h.headers)}),h.headers.append("Vary","Accept"))}return h}return n.error&&d.isSubRequest?await fetch(e,{headers:{"x-sveltekit-error":"true"}}):n.error?A("Internal Server Error",{status:500}):n.depth===0?await ut({event:d,options:t,manifest:r,state:n,status:404,error:new De(d.url.pathname),resolve_opts:f}):n.prerendering?A("not found",{status:404}):await fetch(e)}catch($){return await ye(d,t,$)}finally{d.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},d.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}}function gr(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(r)&&(t===""||!n.startsWith(t))))}function wr(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter(([n])=>n.startsWith(t)&&(r===""||!n.startsWith(r))))}class jr{#e;#t;constructor(t){this.#e=yt,this.#t=t}async init({env:t}){if(bt(gr(t,{public_prefix:this.#e.env_public_prefix,private_prefix:this.#e.env_private_prefix})),$t(wr(t,{public_prefix:this.#e.env_public_prefix,private_prefix:this.#e.env_private_prefix})),!this.#e.hooks)try{const r=await kt();this.#e.hooks={handle:r.handle||(({event:n,resolve:s})=>s(n)),handleError:r.handleError||(({error:n})=>console.error(n)),handleFetch:r.handleFetch||(({request:n,fetch:s})=>s(n))}}catch(r){throw r}}async respond(t,r){if(!(t instanceof Request))throw new Error("The first argument to server.respond must be a Request object. See https://github.com/sveltejs/kit/pull/3384 for details");return _t(t,this.#e,this.#t,{...r,error:!1,depth:0})}}export{jr as Server};
