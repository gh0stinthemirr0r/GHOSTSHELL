import{c as x,o as b,i as g,v as d,k as f,e as p}from"./ssr.js";import{w as u}from"./index.js";import{invoke as a}from"@tauri-apps/api/tauri";import"@tauri-apps/api/event";import{P as v}from"./plus.js";import{X as w}from"./_page.js";const T={themes:[],currentTheme:null,currentThemeId:null};function S(){const{subscribe:r,set:e,update:n}=u(T);return{subscribe:r,setThemes:o=>{n(t=>({...t,themes:o}))},setCurrentTheme:o=>{n(t=>({...t,currentTheme:o})),m(o.tokens)},setCurrentThemeId:o=>{n(t=>({...t,currentThemeId:o}))},applyTheme:async o=>{try{const t=await a("apply_theme",{themeId:o});return n(s=>({...s,currentTheme:t,currentThemeId:o})),m(t.tokens),t}catch(t){throw console.error("Failed to apply theme:",t),t}},saveTheme:async o=>{try{const t=await a("save_theme",{theme:o}),s=await a("list_themes");return n(i=>({...i,themes:s})),t}catch(t){throw console.error("Failed to save theme:",t),t}},exportTheme:async o=>{try{return await a("export_theme",{themeId:o})}catch(t){throw console.error("Failed to export theme:",t),t}},importTheme:async o=>{try{const t=await a("import_theme",{theme:o}),s=await a("list_themes");return n(i=>({...i,themes:s})),t}catch(t){throw console.error("Failed to import theme:",t),t}}}}function m(r){const e=document.documentElement;e.style.setProperty("--bg-tint",r.bgTint),e.style.setProperty("--fg",r.fg),e.style.setProperty("--slate",r.slate),e.style.setProperty("--accent-pink",r.accentPink),e.style.setProperty("--accent-cyan",r.accentCyan),e.style.setProperty("--accent-neon-green",r.accentNeonGreen),e.style.setProperty("--glow-strength",r.glowStrength.toString()),e.style.setProperty("--blur",`${r.blurPx}px`),e.style.setProperty("--noise",r.noiseOpacity.toString()),e.style.setProperty("--cursor-color",r.cursorColor),e.style.setProperty("--font-mono",r.monoFont),e.style.setProperty("--font-ui",r.uiFont),e.style.setProperty("--radius",`${r.radius}px`),e.style.setProperty("--border-color",r.border),P(r.bgTint)}async function P(r){const e=F(r);if(e){const[n,o,t,s]=e,i=Math.round(s*255);try{await a("set_acrylic_tint",{r:n,g:o,b:t,a:i})}catch(l){console.warn("Failed to update acrylic tint:",l)}}}function F(r){const e=r.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);if(e){const n=parseInt(e[1],10),o=parseInt(e[2],10),t=parseInt(e[3],10),s=e[4]?parseFloat(e[4]):1;return[n,o,t,s]}return null}const _=S(),$={accessibility:{reduceMotion:!1,highContrast:!1,transparency:.7},fonts:{monoFont:"JetBrainsMono Nerd Font",uiFont:"Inter",fontSize:14},terminal:{cursorStyle:"block",cursorBlink:!1,fontLigatures:!0}};function C(){const{subscribe:r,set:e,update:n}=u($);return{subscribe:r,set:e,update:n,updateSettings:async o=>{try{await a("update_settings",{newSettings:o}),e(o),I(o)}catch(t){throw console.error("Failed to update settings:",t),t}},setAccessibility:async o=>{try{await a("set_accessibility",{reduceMotion:o.reduceMotion,highContrast:o.highContrast,transparency:o.transparency}),n(t=>({...t,accessibility:o})),y(o)}catch(t){throw console.error("Failed to update accessibility settings:",t),t}},setFonts:async o=>{try{await a("set_fonts",{monoFont:o.monoFont,uiFont:o.uiFont,fontSize:o.fontSize}),n(t=>({...t,fonts:o})),h(o)}catch(t){throw console.error("Failed to update font settings:",t),t}}}}function I(r){y(r.accessibility),h(r.fonts)}function y(r){const e=document.documentElement;r.reduceMotion?e.classList.add("reduce-motion"):e.classList.remove("reduce-motion"),r.highContrast?e.classList.add("high-contrast"):e.classList.remove("high-contrast"),e.style.setProperty("--transparency",r.transparency.toString())}function h(r){const e=document.documentElement;e.style.setProperty("--font-mono",r.monoFont),e.style.setProperty("--font-ui",r.uiFont),e.style.setProperty("--font-size-base",`${r.fontSize}px`)}const L=C();const z={code:`.xterm{height:100% !important;width:100% !important;overflow:hidden !important}.xterm::before,.xterm::after{display:none !important}.xterm .xterm-viewport{background:transparent !important}.xterm .xterm-screen{background:transparent !important}.xterm .xterm-rows{text-shadow:0 0 0.6px rgba(175, 255, 0, 0.25)}.xterm .xterm-cursor-layer .xterm-cursor{display:none !important}.xterm .xterm-helper-textarea{display:none !important}.xterm .xterm-composition-view{display:none !important}.xterm .xterm-selection{display:none !important}.xterm .xterm-viewport::-webkit-scrollbar{display:none !important}.xterm .xterm-viewport{scrollbar-width:none !important}.xterm textarea,.xterm input,.xterm .xterm-char-measure-element,.xterm .xterm-accessibility,.xterm .xterm-accessibility-tree{display:none !important;visibility:hidden !important;opacity:0 !important;position:absolute !important;left:-9999px !important;top:-9999px !important}@keyframes svelte-11tk1xo-cursor-pulse{0%{box-shadow:0 0 8px currentColor,\r
        0 0 16px currentColor,\r
        0 0 24px rgba(175, 255, 0, 0.8)}100%{box-shadow:0 0 12px currentColor,\r
        0 0 24px currentColor,\r
        0 0 36px rgba(175, 255, 0, 1)}}`,map:null},O=x((r,e,n,o)=>{let t=[{id:1,title:"Shell 1",active:!0,sessionId:null}],s="";const i=_.subscribe(c=>{c.currentTheme}),l=L.subscribe(c=>{});return b(()=>{i(),l()}),r.css.add(z),`<div class="h-full flex flex-col bg-transparent"> <div class="frosted border-b border-gray-800/50 px-4 py-2"><div class="flex items-center space-x-1">${g(t,c=>`<div class="flex items-center"><button class="${"flex items-center space-x-2 px-3 py-1.5 rounded-t-lg border-b-2 transition-all duration-200 "+p(c.active?"bg-black/20 border-cyan-500 text-cyan-400":"hover:bg-white/5 border-transparent text-gray-400 hover:text-white",!0)}"><span class="text-sm font-medium">${p(c.title)}</span> ${t.length>1?`<button class="p-0.5 rounded hover:bg-red-500/20 hover:text-red-400 transition-colors">${d(w,"X").$$render(r,{size:12},{},{})} </button>`:""}</button> </div>`)}  <button class="flex items-center justify-center w-8 h-8 rounded hover:bg-white/10 transition-colors text-gray-400 hover:text-white" title="New Shell">${d(v,"Plus").$$render(r,{size:16},{},{})}</button></div></div>  <div class="flex-1 flex flex-col relative"> <div class="flex-1 relative"><div class="absolute inset-0 p-4 flex items-center justify-center" data-svelte-h="svelte-t888qe"><div class="text-center text-gray-400"><div class="text-2xl mb-2">âš¡</div> <div>Loading GHOSTSHELL Terminal...</div></div></div>  <div class="absolute inset-0 pointer-events-none" data-svelte-h="svelte-3ay1qp"><div class="absolute inset-4 rounded-lg" style="box-shadow: inset 0 0 20px rgba(175, 255, 0, 0.1);"></div></div></div>  <div class="frosted border-t border-gray-800/50 p-4 relative"><input placeholder="Type your command here and press Enter..." autofocus class="w-full bg-black/30 border border-gray-700/50 rounded-lg px-4 py-2 text-white font-mono text-sm placeholder-gray-500 focus:border-cyan-500/50 focus:outline-none focus:ring-1 focus:ring-cyan-500/30 transition-all duration-200" style="font-family: var(--font-mono);"${f("value",s,0)}>  <div class="${"absolute inset-4 rounded-lg pointer-events-none opacity-0 transition-opacity duration-200 "+p("",!0)}" style="box-shadow: 0 0 20px rgba(0, 255, 209, 0.2);"></div></div></div> </div>`});export{O as default};
